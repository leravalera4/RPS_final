Anchor IDL loaded successfully
(node:91142) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
RPS MagicBlock Backend Server running on port 3001
WebSocket server ready for real-time gameplay
üöÄ Initializing auto-finalization service...
üîë Service wallet loaded from file
Auto-finalization service initialized
Service wallet: BgMnG9RNeooQNdbEDefKV7gs7tH4Cv3P4xVpViDRqZSn
Player connected: QZi897YlQY3QVGxkAAAB
New socket connection: QZi897YlQY3QVGxkAAAB
üîß Registering submit_move handler for socket: QZi897YlQY3QVGxkAAAB
Service wallet balance: 1.453 SOL
‚úÖ Modern blockchain game UX: Winners get SOL automatically!
Player connected: 9UQbDAqLd3QTgkTpAAAD
New socket connection: 9UQbDAqLd3QTgkTpAAAD
üîß Registering submit_move handler for socket: 9UQbDAqLd3QTgkTpAAAD
Player ID set from find_random_match: CNTs1Nu8
Adding player CNTs1Nu8 to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 4392c13b-5839-40d7-a58a-adf7c34533a7 (300000ms)
Created waiting game for player CNTs1Nu8: 4392c13b-5839-40d7-a58a-adf7c34533a7
Random match for CNTs1Nu8: 4392c13b-5839-40d7-a58a-adf7c34533a7 (sol game)
Player connected: B1hfQ7NJF-zQuBHgAAAF
New socket connection: B1hfQ7NJF-zQuBHgAAAF
üîß Registering submit_move handler for socket: B1hfQ7NJF-zQuBHgAAAF
Socket disconnected: B1hfQ7NJF-zQuBHgAAAF
Player connected: _K3XjAaFjY-WZpSEAAAH
New socket connection: _K3XjAaFjY-WZpSEAAAH
üîß Registering submit_move handler for socket: _K3XjAaFjY-WZpSEAAAH
Socket disconnected: _K3XjAaFjY-WZpSEAAAH
Player connected: hGUBqk55Bc-qpFghAAAJ
New socket connection: hGUBqk55Bc-qpFghAAAJ
üîß Registering submit_move handler for socket: hGUBqk55Bc-qpFghAAAJ
Socket disconnected: 9UQbDAqLd3QTgkTpAAAD
Socket disconnected: hGUBqk55Bc-qpFghAAAJ
Player connected: QepdCy09L6NkoXdyAAAL
New socket connection: QepdCy09L6NkoXdyAAAL
üîß Registering submit_move handler for socket: QepdCy09L6NkoXdyAAAL
Player connected: uD2NLPmcH8FRQftAAAAN
New socket connection: uD2NLPmcH8FRQftAAAAN
üîß Registering submit_move handler for socket: uD2NLPmcH8FRQftAAAAN
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 1,
  totalPlayers: 1,
  totalGames: 135,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 118,
  finishedGames: 0
}
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 1,
  totalPlayers: 1,
  totalGames: 135,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 118,
  finishedGames: 0
}
Player ID set from find_random_match: CNTs1Nu8
Random match failed: Player already in a game
Player ID set from find_random_match: 7kU8bVxK
Found existing public game for player 7kU8bVxK: 4392c13b-5839-40d7-a58a-adf7c34533a7
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game 4392c13b-5839-40d7-a58a-adf7c34533a7 - second player joined
Player 7kU8bVxK joined sol game 4392c13b-5839-40d7-a58a-adf7c34533a7
Updated playerGames map: [
  [ 'CNTs1Nu8', '4392c13b-5839-40d7-a58a-adf7c34533a7' ],
  [ '7kU8bVxK', '4392c13b-5839-40d7-a58a-adf7c34533a7' ]
]
Random match for 7kU8bVxK: 4392c13b-5839-40d7-a58a-adf7c34533a7 (sol game)
‚è∞ Starting round timer for game 4392c13b-5839-40d7-a58a-adf7c34533a7 with duration 15s
‚è∞ Timer created for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 10 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
Socket disconnected: QepdCy09L6NkoXdyAAAL
Player connected: x8Km8mB_j9q2sb-jAAAP
New socket connection: x8Km8mB_j9q2sb-jAAAP
üîß Registering submit_move handler for socket: x8Km8mB_j9q2sb-jAAAP
‚è∞ Countdown 5 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 3 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 2 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 1 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Timer reached 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7, clearing timer
‚è∞ Time up for game 4392c13b-5839-40d7-a58a-adf7c34533a7
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning rock to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'paper' },
  { playerId: '7kU8bVxK', move: 'rock' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'paper', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: paper
üì§ Emitting move_submitted for 7kU8bVxK: rock
processRoundDirectly result: {
  success: true,
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  gameState: {
    gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: '9UQbDAqLd3QTgkTpAAAD',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 1,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059777029
    },
    player2: {
      id: '7kU8bVxK',
      socketId: 'uD2NLPmcH8FRQftAAAAN',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059880072
    },
    currentRound: 1,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object] ],
    createdAt: '2025-10-10T01:29:37.029Z'
  },
  roundComplete: true,
  roundResult: {
    round: 1,
    moves: { player1: 'paper', player2: 'rock' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 1, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 2 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Starting round timer for game 4392c13b-5839-40d7-a58a-adf7c34533a7 with duration 15s
‚è∞ Timer created for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 10 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 5 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 3 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 2 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 1 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Timer reached 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7, clearing timer
‚è∞ Time up for game 4392c13b-5839-40d7-a58a-adf7c34533a7
üé≤ Auto-assigning scissors to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'scissors' },
  { playerId: '7kU8bVxK', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'paper',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: scissors
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  gameState: {
    gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: '9UQbDAqLd3QTgkTpAAAD',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059777029
    },
    player2: {
      id: '7kU8bVxK',
      socketId: 'uD2NLPmcH8FRQftAAAAN',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059880072
    },
    currentRound: 2,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object] ],
    createdAt: '2025-10-10T01:29:37.029Z'
  },
  roundComplete: true,
  roundResult: {
    round: 2,
    moves: { player1: 'scissors', player2: 'paper' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 2, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 3 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Starting round timer for game 4392c13b-5839-40d7-a58a-adf7c34533a7 with duration 15s
‚è∞ Timer created for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 10 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
Socket disconnected: x8Km8mB_j9q2sb-jAAAP
Player connected: y7G95pHH2ZW1L0xmAAAR
New socket connection: y7G95pHH2ZW1L0xmAAAR
üîß Registering submit_move handler for socket: y7G95pHH2ZW1L0xmAAAR
Socket disconnected: uD2NLPmcH8FRQftAAAAN
Player connected: o28_BUe2qXOR8F2FAAAT
New socket connection: o28_BUe2qXOR8F2FAAAT
üîß Registering submit_move handler for socket: o28_BUe2qXOR8F2FAAAT
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 2,
  totalGames: 135,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 118,
  finishedGames: 0
}
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 2,
  totalGames: 135,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 118,
  finishedGames: 0
}
‚è∞ Countdown 5 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 3 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 2 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 1 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Timer reached 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7, clearing timer
‚è∞ Time up for game 4392c13b-5839-40d7-a58a-adf7c34533a7
üé≤ Auto-assigning rock to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'rock' },
  { playerId: '7kU8bVxK', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'paper', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: rock
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  gameState: {
    gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: '9UQbDAqLd3QTgkTpAAAD',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059777029
    },
    player2: {
      id: '7kU8bVxK',
      socketId: 'uD2NLPmcH8FRQftAAAAN',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059880072
    },
    currentRound: 3,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:29:37.029Z'
  },
  roundComplete: true,
  roundResult: {
    round: 3,
    moves: { player1: 'rock', player2: 'paper' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 2, player2: 1 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 4 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Starting round timer for game 4392c13b-5839-40d7-a58a-adf7c34533a7 with duration 15s
‚è∞ Timer created for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 10 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 5 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 3 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 2 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 1 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Timer reached 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7, clearing timer
‚è∞ Time up for game 4392c13b-5839-40d7-a58a-adf7c34533a7
üé≤ Auto-assigning rock to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'rock' },
  { playerId: '7kU8bVxK', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'paper', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: rock
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  gameState: {
    gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: '9UQbDAqLd3QTgkTpAAAD',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059777029
    },
    player2: {
      id: '7kU8bVxK',
      socketId: 'uD2NLPmcH8FRQftAAAAN',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059880072
    },
    currentRound: 4,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:29:37.029Z'
  },
  roundComplete: true,
  roundResult: {
    round: 4,
    moves: { player1: 'rock', player2: 'paper' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 2, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 5 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Starting round timer for game 4392c13b-5839-40d7-a58a-adf7c34533a7 with duration 15s
‚è∞ Timer created for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 10 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 5 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 3 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 2 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 1 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Countdown 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7
‚è∞ Timer reached 0 for game 4392c13b-5839-40d7-a58a-adf7c34533a7, clearing timer
‚è∞ Time up for game 4392c13b-5839-40d7-a58a-adf7c34533a7
üé≤ Auto-assigning rock to player1
üé≤ Auto-assigning scissors to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'rock' },
  { playerId: '7kU8bVxK', move: 'scissors' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'scissors', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: rock
üì§ Emitting move_submitted for 7kU8bVxK: scissors
üèÜ Player 1 wins! ID: CNTs1Nu8, Wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
processRoundDirectly result: {
  success: true,
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  gameState: {
    gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: '9UQbDAqLd3QTgkTpAAAD',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 3,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059777029
    },
    player2: {
      id: '7kU8bVxK',
      socketId: 'uD2NLPmcH8FRQftAAAAN',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760059880072
    },
    currentRound: 5,
    gameStatus: 'finished',
    winner: 'CNTs1Nu8',
    moveHistory: [ [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:29:37.029Z'
  },
  roundComplete: true,
  roundResult: {
    round: 5,
    moves: { player1: 'rock', player2: 'scissors' },
    roundWinner: 'player1',
    gameWinner: 'player1',
    scores: { player1: 3, player2: 2 },
    gameFinished: true
  }
}
Round completed via timeout, emitting round_completed event
üèÅ Game finished: 4392c13b-5839-40d7-a58a-adf7c34533a7, Winner: CNTs1Nu8
üîç Game state details: {
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  winner: 'CNTs1Nu8',
  currency: 'sol',
  player1: {
    id: 'CNTs1Nu8',
    wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK'
  },
  player2: {
    id: '7kU8bVxK',
    wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
  },
  processed: undefined
}
‚úÖ Processing game completion for 4392c13b-5839-40d7-a58a-adf7c34533a7
üéØ Round result: {
  gameWinner: 'player1',
  gameFinished: true,
  round: 5,
  moves: { player1: null, player2: null },
  roundWinner: null,
  scores: { player1: 3, player2: 2 }
}
üöÄ Calling gameManager.processGameCompletion...
üéÆ Processing sol game completion: {
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  winner: 'player1',
  winnerWallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  currency: 'sol',
  player1Wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  player2Wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
}
üîç About to check currency condition: gameState.currency = "sol"
üöÄ SOL game completed - implementing auto-finalization
üîç Currency check passed: sol === 'sol'
Winner: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
Should receive: 0.02 SOL (total pot minus platform fee)
Triggering auto-finalization...
Updating database stats - Winner gets 100 bonus points
üéØ Updated stats for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL: {
  won: false,
  currency: 'sol',
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  newBalance: 2000,
  totalEarned: 1700,
  totalGames: 46
}
üéØ Updated stats for CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK: {
  won: true,
  currency: 'sol',
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  newBalance: 5104,
  totalEarned: 4700,
  totalGames: 68
}
Database stats updated: {
  player1: { won: true, newBalance: 5104 },
  player2: { won: false, newBalance: 2000 }
}
üí∞ SOL referral commission will be processed during auto-finalization
üöÄ Calling auto-finalization service...
üéØ Auto-finalization parameters: {
  gameId: '4392c13b-5839-40d7-a58a-adf7c34533a7',
  winnerWallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  loserWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  stakeAmount: 0.01
}
üöÄ ===== STARTING AUTO-FINALIZATION =====
üìã Game ID: 4392c13b-5839-40d7-a58a-adf7c34533a7
üèÜ Winner: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∏ Stake: 0.01 SOL
‚è∞ Timestamp: 2025-10-10T01:32:56.717Z
üîç Finding PDA for gameId: "4392c13b-5839-40d7-a58a-adf7c34533a7" -> truncated: "4392c13b-5839-40d7-a58a-adf7c345"
üéØ Game PDA: AxQgLbWahejLaYfdqhA3VBwxNmiCjUYcKSQGxL9R5p1m
üîß Game account not found on-chain - skipping blockchain creation, using direct finalization...
üí∞ Proceeding with direct SOL transfer without blockchain game...
üë§ Player1 (Winner): CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üë§ Player2 (Loser): 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üí∞ Processing SOL referral commission for CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK - Total pot: 0.02 SOL, Stake: 0.01 SOL
‚ÑπÔ∏è No SOL commission to process: No referral found
üíµ Transfer calculations:
  Total pot: 0.02 SOL
  Fee rate: 5%
  Platform fee: 0.001 SOL
  Referrer commission: 0 SOL
  Base winner amount: 0.019 SOL
  No fee compensation - users pay own fees
  Final winner amount: 0.019 SOL
üí∏ Direct SOL transfer:
   Total pot: 0.020 SOL
   Platform fee: 0.001 SOL
   Referrer commission: 0.000 SOL
   Winner receives: 0.019 SOL
   Winner wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
   Platform wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üí∏ Creating real SOL transfer transactions...
üöÄ Sending transfer transaction...
üí∞ Real SOL transfer completed: 2oSFkCxWHjDfJFHz5RiPKtvgf5pYK1EN9EDjDSkfdkciPbJP1hoasYoUZKSJk9TcZNHGwiBpHczL79i7ckxJsBYT
‚úÖ 0.019000 SOL sent to winner: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
‚úÖ 0.001000 SOL sent to platform: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üéâ ===== AUTO-FINALIZATION SUCCESS =====
‚úÖ Auto-finalization result: true
üéâ Auto-finalization successful
üí∞ Winner CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK should now have 0.02 SOL
üöÄ Winner receives SOL automatically
Player ID set from find_random_match: CNTs1Nu8
Adding player CNTs1Nu8 to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 5ff0239e-3192-440d-949d-17a2c68b9a09 (300000ms)
Created waiting game for player CNTs1Nu8: 5ff0239e-3192-440d-949d-17a2c68b9a09
Random match for CNTs1Nu8: 5ff0239e-3192-440d-949d-17a2c68b9a09 (sol game)
Player ID set from find_random_match: 7kU8bVxK
Found existing public game for player 7kU8bVxK: 5ff0239e-3192-440d-949d-17a2c68b9a09
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game 5ff0239e-3192-440d-949d-17a2c68b9a09 - second player joined
Player 7kU8bVxK joined sol game 5ff0239e-3192-440d-949d-17a2c68b9a09
Updated playerGames map: [
  [ 'CNTs1Nu8', '5ff0239e-3192-440d-949d-17a2c68b9a09' ],
  [ '7kU8bVxK', '5ff0239e-3192-440d-949d-17a2c68b9a09' ]
]
Random match for 7kU8bVxK: 5ff0239e-3192-440d-949d-17a2c68b9a09 (sol game)
‚è∞ Starting round timer for game 5ff0239e-3192-440d-949d-17a2c68b9a09 with duration 15s
‚è∞ Timer created for game 5ff0239e-3192-440d-949d-17a2c68b9a09
Player connected: tUd1z5Ycmbd1404yAAAV
New socket connection: tUd1z5Ycmbd1404yAAAV
üîß Registering submit_move handler for socket: tUd1z5Ycmbd1404yAAAV
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: 'CNTs1Nu8',
  move: 'paper'
}
Move submission received: {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: 'CNTs1Nu8',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: tUd1z5Ycmbd1404yAAAV
   - Data playerId: CNTs1Nu8
   - Final playerId for move: CNTs1Nu8
   - Move: paper
GameManager.submitMove called:
   - playerId: "CNTs1Nu8"
   - move: "paper"
   - playerGames map: [
  [ 'CNTs1Nu8', '5ff0239e-3192-440d-949d-17a2c68b9a09' ],
  [ '7kU8bVxK', '5ff0239e-3192-440d-949d-17a2c68b9a09' ]
]
Move submitted by CNTs1Nu8: paper
‚è∞ Countdown 10 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
Socket disconnected: tUd1z5Ycmbd1404yAAAV
Player connected: a8SBwKYDwzpFxD_rAAAX
New socket connection: a8SBwKYDwzpFxD_rAAAX
üîß Registering submit_move handler for socket: a8SBwKYDwzpFxD_rAAAX
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: a8SBwKYDwzpFxD_rAAAX
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [
  [ 'CNTs1Nu8', '5ff0239e-3192-440d-949d-17a2c68b9a09' ],
  [ '7kU8bVxK', '5ff0239e-3192-440d-949d-17a2c68b9a09' ]
]
Move submitted by 7kU8bVxK: scissors
Socket disconnected: a8SBwKYDwzpFxD_rAAAX
üîÑ Starting round 2 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
‚è∞ Starting round timer for game 5ff0239e-3192-440d-949d-17a2c68b9a09 with duration 15s
‚è∞ Timer created for game 5ff0239e-3192-440d-949d-17a2c68b9a09
Player connected: 26Wfa3quO_6Ow7sJAAAZ
New socket connection: 26Wfa3quO_6Ow7sJAAAZ
üîß Registering submit_move handler for socket: 26Wfa3quO_6Ow7sJAAAZ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: 'CNTs1Nu8',
  move: 'rock'
}
Move submission received: {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: 'CNTs1Nu8',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: 26Wfa3quO_6Ow7sJAAAZ
   - Data playerId: CNTs1Nu8
   - Final playerId for move: CNTs1Nu8
   - Move: rock
GameManager.submitMove called:
   - playerId: "CNTs1Nu8"
   - move: "rock"
   - playerGames map: [
  [ 'CNTs1Nu8', '5ff0239e-3192-440d-949d-17a2c68b9a09' ],
  [ '7kU8bVxK', '5ff0239e-3192-440d-949d-17a2c68b9a09' ]
]
Move submitted by CNTs1Nu8: rock
Socket disconnected: 26Wfa3quO_6Ow7sJAAAZ
Player connected: 7yWvQYLjcx1zIspUAAAb
New socket connection: 7yWvQYLjcx1zIspUAAAb
üîß Registering submit_move handler for socket: 7yWvQYLjcx1zIspUAAAb
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 7yWvQYLjcx1zIspUAAAb
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [
  [ 'CNTs1Nu8', '5ff0239e-3192-440d-949d-17a2c68b9a09' ],
  [ '7kU8bVxK', '5ff0239e-3192-440d-949d-17a2c68b9a09' ]
]
Move submitted by 7kU8bVxK: paper
Socket disconnected: 7yWvQYLjcx1zIspUAAAb
üîÑ Starting round 3 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
‚è∞ Starting round timer for game 5ff0239e-3192-440d-949d-17a2c68b9a09 with duration 15s
‚è∞ Timer created for game 5ff0239e-3192-440d-949d-17a2c68b9a09
Socket disconnected: y7G95pHH2ZW1L0xmAAAR
‚è∞ Countdown 10 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
‚è∞ Countdown 5 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
‚è∞ Countdown 3 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
‚è∞ Countdown 2 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
‚è∞ Countdown 1 for game 5ff0239e-3192-440d-949d-17a2c68b9a09
Socket disconnected: o28_BUe2qXOR8F2FAAAT
Player connected: FjvfUvtDm05FOSTBAAAd
New socket connection: FjvfUvtDm05FOSTBAAAd
üîß Registering submit_move handler for socket: FjvfUvtDm05FOSTBAAAd
Player 7kU8bVxK leaving game via leave_game event
Game 5ff0239e-3192-440d-949d-17a2c68b9a09 finished - CNTs1Nu8 wins by opponent forfeit
Processing sol game abandonment: {
  gameId: '5ff0239e-3192-440d-949d-17a2c68b9a09',
  winner: 'player1',
  quittingPlayer: 'player2',
  winnerWallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  loserWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  currency: 'sol',
  reason: 'opponent_quit'
}
SOL game abandonment recorded in history
Player 7kU8bVxK left game: 5ff0239e-3192-440d-949d-17a2c68b9a09
Player connected: Cu-l3ilhHDPRM4EiAAAf
New socket connection: Cu-l3ilhHDPRM4EiAAAf
üîß Registering submit_move handler for socket: Cu-l3ilhHDPRM4EiAAAf
Socket disconnected: FjvfUvtDm05FOSTBAAAd
Player connected: YDDBWD3RPc2uv6bIAAAh
New socket connection: YDDBWD3RPc2uv6bIAAAh
üîß Registering submit_move handler for socket: YDDBWD3RPc2uv6bIAAAh
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
Socket disconnected: YDDBWD3RPc2uv6bIAAAh
Player connected: r5NYzLTikjS_8XZbAAAj
New socket connection: r5NYzLTikjS_8XZbAAAj
üîß Registering submit_move handler for socket: r5NYzLTikjS_8XZbAAAj
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
Socket disconnected: Cu-l3ilhHDPRM4EiAAAf
Player connected: 0NlzVmF0lyWfsjRqAAAl
New socket connection: 0NlzVmF0lyWfsjRqAAAl
üîß Registering submit_move handler for socket: 0NlzVmF0lyWfsjRqAAAl
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
Player ID set from find_random_match: 7kU8bVxK
Found queued player match: 7kU8bVxK vs CNTs1Nu8
Creating SOL game with stake 0.01 SOL
üßπ Cleaning up old finished game 5ff0239e-3192-440d-949d-17a2c68b9a09 for creator CNTs1Nu8
‚è∞ Started timeout timer for public game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b (300000ms)
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b - second player joined
Player 7kU8bVxK joined sol game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Updated playerGames map: [
  [ 'CNTs1Nu8', 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b' ],
  [ '7kU8bVxK', 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b' ]
]
Successfully matched 7kU8bVxK with CNTs1Nu8 in game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Random match for 7kU8bVxK: d8182c2f-ffc2-49f0-aa55-3c12269c5a5b (sol game)
‚è∞ Starting round timer for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b with duration 15s
‚è∞ Timer created for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 10 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 5 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 3 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Socket disconnected: 0NlzVmF0lyWfsjRqAAAl
Player connected: cenpUg5uVCIneoGiAAAn
New socket connection: cenpUg5uVCIneoGiAAAn
üîß Registering submit_move handler for socket: cenpUg5uVCIneoGiAAAn
‚è∞ Countdown 2 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 2,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
‚è∞ Countdown 1 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Timer reached 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b, clearing timer
‚è∞ Time up for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üé≤ Auto-assigning scissors to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'scissors' },
  { playerId: '7kU8bVxK', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'paper',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: scissors
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  gameState: {
    gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: 'y7G95pHH2ZW1L0xmAAAR',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    player2: {
      id: '7kU8bVxK',
      socketId: '0NlzVmF0lyWfsjRqAAAl',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    currentRound: 1,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object] ],
    createdAt: '2025-10-10T01:48:04.715Z'
  },
  roundComplete: true,
  roundResult: {
    round: 1,
    moves: { player1: 'scissors', player2: 'paper' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 1, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 2 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Starting round timer for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b with duration 15s
‚è∞ Timer created for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Player ID set from find_random_match: 7kU8bVxK
Random match failed: Player already in a game
‚è∞ Countdown 10 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 5 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 3 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 2 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 1 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Timer reached 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b, clearing timer
‚è∞ Time up for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üé≤ Auto-assigning scissors to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'scissors' },
  { playerId: '7kU8bVxK', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'paper',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: scissors
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  gameState: {
    gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: 'y7G95pHH2ZW1L0xmAAAR',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    player2: {
      id: '7kU8bVxK',
      socketId: '0NlzVmF0lyWfsjRqAAAl',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    currentRound: 2,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object] ],
    createdAt: '2025-10-10T01:48:04.715Z'
  },
  roundComplete: true,
  roundResult: {
    round: 2,
    moves: { player1: 'scissors', player2: 'paper' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 2, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 3 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Starting round timer for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b with duration 15s
‚è∞ Timer created for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Socket disconnected: cenpUg5uVCIneoGiAAAn
‚è∞ Countdown 10 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Player connected: ywhN-1oppGb1P5UvAAAp
New socket connection: ywhN-1oppGb1P5UvAAAp
üîß Registering submit_move handler for socket: ywhN-1oppGb1P5UvAAAp
Socket disconnected: ywhN-1oppGb1P5UvAAAp
Player connected: HL_wPCUDGAeNXFBTAAAr
New socket connection: HL_wPCUDGAeNXFBTAAAr
üîß Registering submit_move handler for socket: HL_wPCUDGAeNXFBTAAAr
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 2,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
‚è∞ Countdown 5 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 3 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 2 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Player ID set from find_random_match: 7kU8bVxK
Random match failed: Player already in a game
‚è∞ Countdown 1 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Timer reached 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b, clearing timer
‚è∞ Time up for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üé≤ Auto-assigning rock to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'rock' },
  { playerId: '7kU8bVxK', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'paper', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: rock
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  gameState: {
    gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: 'y7G95pHH2ZW1L0xmAAAR',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    player2: {
      id: '7kU8bVxK',
      socketId: '0NlzVmF0lyWfsjRqAAAl',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    currentRound: 3,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:48:04.715Z'
  },
  roundComplete: true,
  roundResult: {
    round: 3,
    moves: { player1: 'rock', player2: 'paper' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 2, player2: 1 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 4 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Starting round timer for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b with duration 15s
‚è∞ Timer created for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Socket disconnected: HL_wPCUDGAeNXFBTAAAr
Player connected: ZI-grJbavnCDTdi4AAAt
New socket connection: ZI-grJbavnCDTdi4AAAt
üîß Registering submit_move handler for socket: ZI-grJbavnCDTdi4AAAt
Socket disconnected: ZI-grJbavnCDTdi4AAAt
Player connected: Bw0JcB--Lz0thIosAAAv
New socket connection: Bw0JcB--Lz0thIosAAAv
üîß Registering submit_move handler for socket: Bw0JcB--Lz0thIosAAAv
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 2,
  totalGames: 137,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 120,
  finishedGames: 1
}
‚è∞ Countdown 10 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 5 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
Player ID set from find_random_match: CNTs1Nu8
Random match failed: Player already in a game
‚è∞ Countdown 3 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 2 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 1 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Countdown 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
‚è∞ Timer reached 0 for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b, clearing timer
‚è∞ Time up for game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning rock to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: 'CNTs1Nu8', move: 'paper' },
  { playerId: '7kU8bVxK', move: 'rock' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'paper', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for CNTs1Nu8: paper
üì§ Emitting move_submitted for 7kU8bVxK: rock
üèÜ Player 1 wins! ID: CNTs1Nu8, Wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
processRoundDirectly result: {
  success: true,
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  gameState: {
    gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: 'CNTs1Nu8',
      socketId: 'y7G95pHH2ZW1L0xmAAAR',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 3,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    player2: {
      id: '7kU8bVxK',
      socketId: '0NlzVmF0lyWfsjRqAAAl',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060884715
    },
    currentRound: 4,
    gameStatus: 'finished',
    winner: 'CNTs1Nu8',
    moveHistory: [ [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:48:04.715Z'
  },
  roundComplete: true,
  roundResult: {
    round: 4,
    moves: { player1: 'paper', player2: 'rock' },
    roundWinner: 'player1',
    gameWinner: 'player1',
    scores: { player1: 3, player2: 1 },
    gameFinished: true
  }
}
Round completed via timeout, emitting round_completed event
üèÅ Game finished: d8182c2f-ffc2-49f0-aa55-3c12269c5a5b, Winner: CNTs1Nu8
üîç Game state details: {
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  winner: 'CNTs1Nu8',
  currency: 'sol',
  player1: {
    id: 'CNTs1Nu8',
    wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK'
  },
  player2: {
    id: '7kU8bVxK',
    wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
  },
  processed: undefined
}
‚úÖ Processing game completion for d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üéØ Round result: {
  gameWinner: 'player1',
  gameFinished: true,
  round: 4,
  moves: { player1: null, player2: null },
  roundWinner: null,
  scores: { player1: 3, player2: 1 }
}
üöÄ Calling gameManager.processGameCompletion...
üéÆ Processing sol game completion: {
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  winner: 'player1',
  winnerWallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  currency: 'sol',
  player1Wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  player2Wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
}
üîç About to check currency condition: gameState.currency = "sol"
üöÄ SOL game completed - implementing auto-finalization
üîç Currency check passed: sol === 'sol'
Winner: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
Should receive: 0.02 SOL (total pot minus platform fee)
Triggering auto-finalization...
Updating database stats - Winner gets 100 bonus points
üéØ Updated stats for CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK: {
  won: true,
  currency: 'sol',
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  newBalance: 5204,
  totalEarned: 4800,
  totalGames: 69
}
üéØ Updated stats for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL: {
  won: false,
  currency: 'sol',
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  newBalance: 2000,
  totalEarned: 1700,
  totalGames: 47
}
Database stats updated: {
  player1: { won: true, newBalance: 5204 },
  player2: { won: false, newBalance: 2000 }
}
üí∞ SOL referral commission will be processed during auto-finalization
üöÄ Calling auto-finalization service...
üéØ Auto-finalization parameters: {
  gameId: 'd8182c2f-ffc2-49f0-aa55-3c12269c5a5b',
  winnerWallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  loserWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  stakeAmount: 0.01
}
üöÄ ===== STARTING AUTO-FINALIZATION =====
üìã Game ID: d8182c2f-ffc2-49f0-aa55-3c12269c5a5b
üèÜ Winner: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∏ Stake: 0.01 SOL
‚è∞ Timestamp: 2025-10-10T01:49:21.096Z
üîç Finding PDA for gameId: "d8182c2f-ffc2-49f0-aa55-3c12269c5a5b" -> truncated: "d8182c2f-ffc2-49f0-aa55-3c12269c"
üéØ Game PDA: BGroSVCSFiUK5C1ozpNH7nM6yj1YPjrgHReGT7xjWjR6
üîß Game account not found on-chain - skipping blockchain creation, using direct finalization...
üí∞ Proceeding with direct SOL transfer without blockchain game...
üë§ Player1 (Winner): CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üë§ Player2 (Loser): 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üí∞ Processing SOL referral commission for CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK - Total pot: 0.02 SOL, Stake: 0.01 SOL
‚ÑπÔ∏è No SOL commission to process: No referral found
üíµ Transfer calculations:
  Total pot: 0.02 SOL
  Fee rate: 5%
  Platform fee: 0.001 SOL
  Referrer commission: 0 SOL
  Base winner amount: 0.019 SOL
  No fee compensation - users pay own fees
  Final winner amount: 0.019 SOL
üí∏ Direct SOL transfer:
   Total pot: 0.020 SOL
   Platform fee: 0.001 SOL
   Referrer commission: 0.000 SOL
   Winner receives: 0.019 SOL
   Winner wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
   Platform wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üí∏ Creating real SOL transfer transactions...
üöÄ Sending transfer transaction...
üí∞ Real SOL transfer completed: 37XraahPcpA2tMPP7MsvAfRGTnQWcZyNMjhwy6FhENCL9b4stjsVHnqihjaeMC1eSL8dcGtsemwM7fTLBNnqwBDJ
‚úÖ 0.019000 SOL sent to winner: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
‚úÖ 0.001000 SOL sent to platform: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üéâ ===== AUTO-FINALIZATION SUCCESS =====
‚úÖ Auto-finalization result: true
üéâ Auto-finalization successful
üí∞ Winner CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK should now have 0.02 SOL
üöÄ Winner receives SOL automatically
Player ID set from find_random_match: 7kU8bVxK
üßπ Cleaning up old finished game d8182c2f-ffc2-49f0-aa55-3c12269c5a5b for player 7kU8bVxK
Adding player 7kU8bVxK to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 35ebfe00-9e00-4f07-bb0b-8c4316986336 (300000ms)
Created waiting game for player 7kU8bVxK: 35ebfe00-9e00-4f07-bb0b-8c4316986336
Random match for 7kU8bVxK: 35ebfe00-9e00-4f07-bb0b-8c4316986336 (sol game)
Socket disconnected: Bw0JcB--Lz0thIosAAAv
Player connected: 60UQCLCAzSimrLlbAAAx
New socket connection: 60UQCLCAzSimrLlbAAAx
üîß Registering submit_move handler for socket: 60UQCLCAzSimrLlbAAAx
Socket disconnected: 60UQCLCAzSimrLlbAAAx
Player connected: 0DfqYIbf3BrQdW-XAAAz
New socket connection: 0DfqYIbf3BrQdW-XAAAz
üîß Registering submit_move handler for socket: 0DfqYIbf3BrQdW-XAAAz
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 1,
  totalPlayers: 0,
  totalGames: 138,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 121,
  finishedGames: 0
}
Socket disconnected: r5NYzLTikjS_8XZbAAAj
Player connected: z89XcVh4PmTJxxDdAAA1
New socket connection: z89XcVh4PmTJxxDdAAA1
üîß Registering submit_move handler for socket: z89XcVh4PmTJxxDdAAA1
Socket disconnected: z89XcVh4PmTJxxDdAAA1
Player connected: xoo0QmLMsVC4yfBEAAA3
New socket connection: xoo0QmLMsVC4yfBEAAA3
üîß Registering submit_move handler for socket: xoo0QmLMsVC4yfBEAAA3
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 1,
  totalPlayers: 0,
  totalGames: 138,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 121,
  finishedGames: 0
}
Player ID set from find_random_match: CNTs1Nu8
Found existing public game for player CNTs1Nu8: 35ebfe00-9e00-4f07-bb0b-8c4316986336
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 - second player joined
Player CNTs1Nu8 joined sol game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Updated playerGames map: [ [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ] ]
Random match for CNTs1Nu8: 35ebfe00-9e00-4f07-bb0b-8c4316986336 (sol game)
‚è∞ Starting round timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 with duration 15s
‚è∞ Timer created for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Player connected: iOmMuY9YoMJv7If3AAA5
New socket connection: iOmMuY9YoMJv7If3AAA5
üîß Registering submit_move handler for socket: iOmMuY9YoMJv7If3AAA5
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  playerId: 'CNTs1Nu8',
  move: 'scissors'
}
Move submission received: {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  playerId: 'CNTs1Nu8',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: iOmMuY9YoMJv7If3AAA5
   - Data playerId: CNTs1Nu8
   - Final playerId for move: CNTs1Nu8
   - Move: scissors
GameManager.submitMove called:
   - playerId: "CNTs1Nu8"
   - move: "scissors"
   - playerGames map: [ [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ] ]
Move submitted by CNTs1Nu8: scissors
Socket disconnected: iOmMuY9YoMJv7If3AAA5
‚è∞ Countdown 10 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 1 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Timer reached 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336, clearing timer
‚è∞ Time up for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
üé≤ Auto-assigning rock to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'rock' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'scissors', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: rock
processRoundDirectly result: {
  success: true,
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  gameState: {
    gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'Bw0JcB--Lz0thIosAAAv',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060966325
    },
    player2: {
      id: 'CNTs1Nu8',
      socketId: 'xoo0QmLMsVC4yfBEAAA3',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 0,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061020210
    },
    currentRound: 1,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object] ],
    createdAt: '2025-10-10T01:49:26.325Z'
  },
  roundComplete: true,
  roundResult: {
    round: 1,
    moves: { player1: 'rock', player2: 'scissors' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 1, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Starting round timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 with duration 15s
‚è∞ Timer created for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Player connected: rRuwkE2_2IwOLiCIAAA7
New socket connection: rRuwkE2_2IwOLiCIAAA7
üîß Registering submit_move handler for socket: rRuwkE2_2IwOLiCIAAA7
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  playerId: 'CNTs1Nu8',
  move: 'scissors'
}
Move submission received: {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  playerId: 'CNTs1Nu8',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: rRuwkE2_2IwOLiCIAAA7
   - Data playerId: CNTs1Nu8
   - Final playerId for move: CNTs1Nu8
   - Move: scissors
GameManager.submitMove called:
   - playerId: "CNTs1Nu8"
   - move: "scissors"
   - playerGames map: [ [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ] ]
Move submitted by CNTs1Nu8: scissors
Socket disconnected: rRuwkE2_2IwOLiCIAAA7
‚è∞ Countdown 10 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 1 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Timer reached 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336, clearing timer
‚è∞ Time up for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
üé≤ Auto-assigning scissors to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'scissors' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: scissors
processRoundDirectly result: {
  success: true,
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  gameState: {
    gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'Bw0JcB--Lz0thIosAAAv',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060966325
    },
    player2: {
      id: 'CNTs1Nu8',
      socketId: 'xoo0QmLMsVC4yfBEAAA3',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 0,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061020210
    },
    currentRound: 2,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object] ],
    createdAt: '2025-10-10T01:49:26.325Z'
  },
  roundComplete: true,
  roundResult: {
    round: 2,
    moves: { player1: 'scissors', player2: 'scissors' },
    roundWinner: 'draw',
    gameWinner: null,
    scores: { player1: 1, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Starting round timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 with duration 15s
‚è∞ Timer created for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 10 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 1 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Timer reached 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336, clearing timer
‚è∞ Time up for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
üé≤ Auto-assigning scissors to player1
üé≤ Auto-assigning rock to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'scissors' },
  { playerId: 'CNTs1Nu8', move: 'rock' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'scissors', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: scissors
üì§ Emitting move_submitted for CNTs1Nu8: rock
processRoundDirectly result: {
  success: true,
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  gameState: {
    gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'Bw0JcB--Lz0thIosAAAv',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060966325
    },
    player2: {
      id: 'CNTs1Nu8',
      socketId: 'xoo0QmLMsVC4yfBEAAA3',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 1,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061020210
    },
    currentRound: 3,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:49:26.325Z'
  },
  roundComplete: true,
  roundResult: {
    round: 3,
    moves: { player1: 'scissors', player2: 'rock' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 1, player2: 1 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 4 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Starting round timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 with duration 15s
‚è∞ Timer created for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 10 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Player ID set from find_random_match: 7kU8bVxK
Adding player 7kU8bVxK to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b (300000ms)
Created waiting game for player 7kU8bVxK: 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Random match for 7kU8bVxK: 6541e3f9-557d-4dc9-9e9e-3295d3870c9b (sol game)
‚è∞ Countdown 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 1 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Timer reached 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336, clearing timer
‚è∞ Time up for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning scissors to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'paper' },
  { playerId: 'CNTs1Nu8', move: 'scissors' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'paper',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
üì§ Emitting move_submitted for CNTs1Nu8: scissors
processRoundDirectly result: {
  success: true,
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  gameState: {
    gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'Bw0JcB--Lz0thIosAAAv',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060966325
    },
    player2: {
      id: 'CNTs1Nu8',
      socketId: 'xoo0QmLMsVC4yfBEAAA3',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061020210
    },
    currentRound: 4,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:49:26.325Z'
  },
  roundComplete: true,
  roundResult: {
    round: 4,
    moves: { player1: 'paper', player2: 'scissors' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 1, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Starting round timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 with duration 15s
‚è∞ Timer created for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 10 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Socket disconnected: QZi897YlQY3QVGxkAAAB
Player connected: uk3qRNWEvKh6DSZsAAA9
New socket connection: uk3qRNWEvKh6DSZsAAA9
üîß Registering submit_move handler for socket: uk3qRNWEvKh6DSZsAAA9
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 1,
  totalPlayers: 2,
  totalGames: 138,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 121,
  finishedGames: 0
}
‚è∞ Countdown 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 1 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Timer reached 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336, clearing timer
‚è∞ Time up for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning rock to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'paper' },
  { playerId: 'CNTs1Nu8', move: 'rock' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'paper', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
üì§ Emitting move_submitted for CNTs1Nu8: rock
processRoundDirectly result: {
  success: true,
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  gameState: {
    gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'Bw0JcB--Lz0thIosAAAv',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060966325
    },
    player2: {
      id: 'CNTs1Nu8',
      socketId: 'xoo0QmLMsVC4yfBEAAA3',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061020210
    },
    currentRound: 5,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:49:26.325Z'
  },
  roundComplete: true,
  roundResult: {
    round: 5,
    moves: { player1: 'paper', player2: 'rock' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 2, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 6 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Starting round timer for game 35ebfe00-9e00-4f07-bb0b-8c4316986336 with duration 15s
‚è∞ Timer created for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Player ID set from find_random_match: 6ayLUKjR
Found existing public game for player 6ayLUKjR: 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b - second player joined
Player 6ayLUKjR joined sol game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Updated playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Random match for 6ayLUKjR: 6541e3f9-557d-4dc9-9e9e-3295d3870c9b (sol game)
‚è∞ Countdown 10 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: VKtgW63tplGZRuvmAAA_
New socket connection: VKtgW63tplGZRuvmAAA_
üîß Registering submit_move handler for socket: VKtgW63tplGZRuvmAAA_
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: VKtgW63tplGZRuvmAAA_
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 7kU8bVxK: rock
‚è∞ Countdown 5 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 10 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Socket disconnected: VKtgW63tplGZRuvmAAA_
Player connected: TWazHV4NiZo1gfWuAABB
New socket connection: TWazHV4NiZo1gfWuAABB
üîß Registering submit_move handler for socket: TWazHV4NiZo1gfWuAABB
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: TWazHV4NiZo1gfWuAABB
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 6ayLUKjR: scissors
‚è∞ Countdown 3 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
Socket disconnected: TWazHV4NiZo1gfWuAABB
‚è∞ Countdown 2 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 1 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Countdown 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
‚è∞ Timer reached 0 for game 35ebfe00-9e00-4f07-bb0b-8c4316986336, clearing timer
‚è∞ Time up for game 35ebfe00-9e00-4f07-bb0b-8c4316986336
üé≤ Auto-assigning scissors to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'scissors' },
  { playerId: 'CNTs1Nu8', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'paper',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: scissors
üì§ Emitting move_submitted for CNTs1Nu8: paper
üèÜ Player 1 wins! ID: 7kU8bVxK, Wallet: 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
processRoundDirectly result: {
  success: true,
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  gameState: {
    gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'Bw0JcB--Lz0thIosAAAv',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 3,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760060966325
    },
    player2: {
      id: 'CNTs1Nu8',
      socketId: 'xoo0QmLMsVC4yfBEAAA3',
      wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061020210
    },
    currentRound: 6,
    gameStatus: 'finished',
    winner: '7kU8bVxK',
    moveHistory: [ [Object], [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:49:26.325Z'
  },
  roundComplete: true,
  roundResult: {
    round: 6,
    moves: { player1: 'scissors', player2: 'paper' },
    roundWinner: 'player1',
    gameWinner: 'player1',
    scores: { player1: 3, player2: 2 },
    gameFinished: true
  }
}
Round completed via timeout, emitting round_completed event
üèÅ Game finished: 35ebfe00-9e00-4f07-bb0b-8c4316986336, Winner: 7kU8bVxK
üîç Game state details: {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  winner: '7kU8bVxK',
  currency: 'sol',
  player1: {
    id: '7kU8bVxK',
    wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
  },
  player2: {
    id: 'CNTs1Nu8',
    wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK'
  },
  processed: undefined
}
‚úÖ Processing game completion for 35ebfe00-9e00-4f07-bb0b-8c4316986336
üéØ Round result: {
  gameWinner: 'player1',
  gameFinished: true,
  round: 6,
  moves: { player1: null, player2: null },
  roundWinner: null,
  scores: { player1: 3, player2: 2 }
}
üöÄ Calling gameManager.processGameCompletion...
üéÆ Processing sol game completion: {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  winner: 'player1',
  winnerWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  currency: 'sol',
  player1Wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  player2Wallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK'
}
üîç About to check currency condition: gameState.currency = "sol"
üöÄ SOL game completed - implementing auto-finalization
üîç Currency check passed: sol === 'sol'
Winner: 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
Should receive: 0.02 SOL (total pot minus platform fee)
Triggering auto-finalization...
Updating database stats - Winner gets 100 bonus points
üéØ Updated stats for CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK: {
  won: false,
  currency: 'sol',
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  newBalance: 5204,
  totalEarned: 4800,
  totalGames: 70
}
üéØ Updated stats for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL: {
  won: true,
  currency: 'sol',
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  newBalance: 2100,
  totalEarned: 1800,
  totalGames: 48
}
Database stats updated: {
  player1: { won: true, newBalance: 2100 },
  player2: { won: false, newBalance: 5204 }
}
üí∞ SOL referral commission will be processed during auto-finalization
üöÄ Calling auto-finalization service...
üéØ Auto-finalization parameters: {
  gameId: '35ebfe00-9e00-4f07-bb0b-8c4316986336',
  winnerWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  loserWallet: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  stakeAmount: 0.01
}
üöÄ ===== STARTING AUTO-FINALIZATION =====
üìã Game ID: 35ebfe00-9e00-4f07-bb0b-8c4316986336
üèÜ Winner: 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üí∏ Stake: 0.01 SOL
‚è∞ Timestamp: 2025-10-10T01:52:16.528Z
üîç Finding PDA for gameId: "35ebfe00-9e00-4f07-bb0b-8c4316986336" -> truncated: "35ebfe00-9e00-4f07-bb0b-8c431698"
üéØ Game PDA: Baaspi8kpiywP24r7GdW6RnuAEwCiJfjPEzLXm3dqD9W
üîß Game account not found on-chain - skipping blockchain creation, using direct finalization...
üí∞ Proceeding with direct SOL transfer without blockchain game...
üë§ Player1 (Winner): 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üë§ Player2 (Loser): CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∞ Processing SOL referral commission for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL - Total pot: 0.02 SOL, Stake: 0.01 SOL
‚úÖ SOL referral commission processed: {
  referrer: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  commission: 0.0002,
  platformFeeRate: 0.04,
  referrerFeeRate: 0.01
}
üéØ Referrer found: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK, Commission: 0.0002 SOL
üíµ Transfer calculations:
  Total pot: 0.02 SOL
  Fee rate: 5%
  Platform fee: 0.0008 SOL
  Referrer commission: 0.0002 SOL
  Base winner amount: 0.019000000000000003 SOL
  No fee compensation - users pay own fees
  Final winner amount: 0.019000000000000003 SOL
üí∏ Direct SOL transfer:
   Total pot: 0.020 SOL
   Platform fee: 0.001 SOL
   Referrer commission: 0.000 SOL
   Winner receives: 0.019 SOL
   Winner wallet: 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
   Platform wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Referrer wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∏ Creating real SOL transfer transactions...
üíé Added referrer transfer: 0.000200 SOL to CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üöÄ Sending transfer transaction...
üí∞ Real SOL transfer completed: 5HZ13guez8JsBxEyh2quxENJhyq6jFYkWLuq5XhYButEGrQDYabRc4dkg57EaA9dP4jAsAcpQ8Q4fFxuqTKwPhpp
‚úÖ 0.019000 SOL sent to winner: 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
‚úÖ 0.000800 SOL sent to platform: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.000200 SOL sent to referrer: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üéâ ===== AUTO-FINALIZATION SUCCESS =====
‚úÖ Auto-finalization result: true
üéâ Auto-finalization successful
üí∞ Winner 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL should now have 0.02 SOL
üöÄ Winner receives SOL automatically
üîÑ Starting round 2 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Socket disconnected: xoo0QmLMsVC4yfBEAAA3
Player connected: Ta6gtwWxhRYdaAWtAABD
New socket connection: Ta6gtwWxhRYdaAWtAABD
üîß Registering submit_move handler for socket: Ta6gtwWxhRYdaAWtAABD
Player connected: Jnydxs99fdoMza5pAABF
New socket connection: Jnydxs99fdoMza5pAABF
üîß Registering submit_move handler for socket: Jnydxs99fdoMza5pAABF
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: Jnydxs99fdoMza5pAABF
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 7kU8bVxK: scissors
Socket disconnected: Jnydxs99fdoMza5pAABF
Player connected: bhV0ZlzY98lChPTeAABH
New socket connection: bhV0ZlzY98lChPTeAABH
üîß Registering submit_move handler for socket: bhV0ZlzY98lChPTeAABH
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: bhV0ZlzY98lChPTeAABH
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: rock
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "rock"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 6ayLUKjR: rock
Socket disconnected: bhV0ZlzY98lChPTeAABH
üîÑ Starting round 3 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player ID set from find_random_match: 6ayLUKjR
Random match failed: Player already in a game
‚è∞ Countdown 10 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: okXa62lWZhepPU1xAABJ
New socket connection: okXa62lWZhepPU1xAABJ
üîß Registering submit_move handler for socket: okXa62lWZhepPU1xAABJ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: okXa62lWZhepPU1xAABJ
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 7kU8bVxK: scissors
Socket disconnected: okXa62lWZhepPU1xAABJ
Player connected: hhhD4t0zyQELl88kAABL
New socket connection: hhhD4t0zyQELl88kAABL
üîß Registering submit_move handler for socket: hhhD4t0zyQELl88kAABL
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: hhhD4t0zyQELl88kAABL
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: rock
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "rock"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 6ayLUKjR: rock
Socket disconnected: hhhD4t0zyQELl88kAABL
üîÑ Starting round 4 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: 3ln9ydTV6hUfsiWcAABN
New socket connection: 3ln9ydTV6hUfsiWcAABN
üîß Registering submit_move handler for socket: 3ln9ydTV6hUfsiWcAABN
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: 3ln9ydTV6hUfsiWcAABN
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 7kU8bVxK: rock
Player connected: qXhBP6DNz3A0QgjxAABP
New socket connection: qXhBP6DNz3A0QgjxAABP
üîß Registering submit_move handler for socket: qXhBP6DNz3A0QgjxAABP
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: qXhBP6DNz3A0QgjxAABP
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ 'CNTs1Nu8', '35ebfe00-9e00-4f07-bb0b-8c4316986336' ],
  [ '7kU8bVxK', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ],
  [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ]
]
Move submitted by 6ayLUKjR: scissors
Socket disconnected: 3ln9ydTV6hUfsiWcAABN
Socket disconnected: qXhBP6DNz3A0QgjxAABP
üîÑ Starting round 5 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: S1ZjQ9vctp-I4kuDAABR
New socket connection: S1ZjQ9vctp-I4kuDAABR
üîß Registering submit_move handler for socket: S1ZjQ9vctp-I4kuDAABR
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: S1ZjQ9vctp-I4kuDAABR
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: S1ZjQ9vctp-I4kuDAABR
Player connected: 6bpEASRHjmtCQrFPAABT
New socket connection: 6bpEASRHjmtCQrFPAABT
üîß Registering submit_move handler for socket: 6bpEASRHjmtCQrFPAABT
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 6bpEASRHjmtCQrFPAABT
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: NKFHjecmXnGpd5KNAABV
New socket connection: NKFHjecmXnGpd5KNAABV
üîß Registering submit_move handler for socket: NKFHjecmXnGpd5KNAABV
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: NKFHjecmXnGpd5KNAABV
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: 6bpEASRHjmtCQrFPAABT
Player connected: wbdKyMuy2e50Q_LxAABX
New socket connection: wbdKyMuy2e50Q_LxAABX
üîß Registering submit_move handler for socket: wbdKyMuy2e50Q_LxAABX
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: wbdKyMuy2e50Q_LxAABX
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: _SoeH9ZNeaqQg7VSAABZ
New socket connection: _SoeH9ZNeaqQg7VSAABZ
üîß Registering submit_move handler for socket: _SoeH9ZNeaqQg7VSAABZ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: _SoeH9ZNeaqQg7VSAABZ
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: FooLgbXgeR_F7uzuAABb
New socket connection: FooLgbXgeR_F7uzuAABb
üîß Registering submit_move handler for socket: FooLgbXgeR_F7uzuAABb
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: FooLgbXgeR_F7uzuAABb
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: NKFHjecmXnGpd5KNAABV
Socket disconnected: wbdKyMuy2e50Q_LxAABX
Socket disconnected: _SoeH9ZNeaqQg7VSAABZ
Player connected: VwrGRhAzhbKMWybfAABd
New socket connection: VwrGRhAzhbKMWybfAABd
üîß Registering submit_move handler for socket: VwrGRhAzhbKMWybfAABd
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: VwrGRhAzhbKMWybfAABd
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: CrAvAdu7TigtcJMKAABf
New socket connection: CrAvAdu7TigtcJMKAABf
üîß Registering submit_move handler for socket: CrAvAdu7TigtcJMKAABf
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: CrAvAdu7TigtcJMKAABf
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: FooLgbXgeR_F7uzuAABb
Player connected: P7N7S_LLWCPIXgZhAABh
New socket connection: P7N7S_LLWCPIXgZhAABh
üîß Registering submit_move handler for socket: P7N7S_LLWCPIXgZhAABh
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: P7N7S_LLWCPIXgZhAABh
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
‚è∞ Countdown 10 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: IPvajbQ0jubDGnPXAABj
New socket connection: IPvajbQ0jubDGnPXAABj
üîß Registering submit_move handler for socket: IPvajbQ0jubDGnPXAABj
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: IPvajbQ0jubDGnPXAABj
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: m7TQCo3IYaNNbzMeAABl
New socket connection: m7TQCo3IYaNNbzMeAABl
üîß Registering submit_move handler for socket: m7TQCo3IYaNNbzMeAABl
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: m7TQCo3IYaNNbzMeAABl
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: VwrGRhAzhbKMWybfAABd
Socket disconnected: CrAvAdu7TigtcJMKAABf
Player connected: iBP3ae4_bbEAnf19AABn
New socket connection: iBP3ae4_bbEAnf19AABn
üîß Registering submit_move handler for socket: iBP3ae4_bbEAnf19AABn
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: iBP3ae4_bbEAnf19AABn
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Move submitted by 6ayLUKjR: paper
Socket disconnected: P7N7S_LLWCPIXgZhAABh
Socket disconnected: IPvajbQ0jubDGnPXAABj
Socket disconnected: m7TQCo3IYaNNbzMeAABl
Socket disconnected: iBP3ae4_bbEAnf19AABn
Player connected: 9Lw4qBxEOM1fNeVkAABp
New socket connection: 9Lw4qBxEOM1fNeVkAABp
üîß Registering submit_move handler for socket: 9Lw4qBxEOM1fNeVkAABp
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: 9Lw4qBxEOM1fNeVkAABp
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: nfIHk5ap4d1OcwP-AABr
New socket connection: nfIHk5ap4d1OcwP-AABr
üîß Registering submit_move handler for socket: nfIHk5ap4d1OcwP-AABr
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: nfIHk5ap4d1OcwP-AABr
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: 0uswdx47M1scxNchAABt
New socket connection: 0uswdx47M1scxNchAABt
üîß Registering submit_move handler for socket: 0uswdx47M1scxNchAABt
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 0uswdx47M1scxNchAABt
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: Ic_PSuay6QQhNdTjAABv
New socket connection: Ic_PSuay6QQhNdTjAABv
üîß Registering submit_move handler for socket: Ic_PSuay6QQhNdTjAABv
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: Ic_PSuay6QQhNdTjAABv
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: 9Lw4qBxEOM1fNeVkAABp
‚è∞ Countdown 5 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: j7Q8Hw3B9Kargz3cAABx
New socket connection: j7Q8Hw3B9Kargz3cAABx
üîß Registering submit_move handler for socket: j7Q8Hw3B9Kargz3cAABx
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: j7Q8Hw3B9Kargz3cAABx
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: nfIHk5ap4d1OcwP-AABr
Player connected: QB_MucYsfUPcXzAPAABz
New socket connection: QB_MucYsfUPcXzAPAABz
üîß Registering submit_move handler for socket: QB_MucYsfUPcXzAPAABz
Socket disconnected: 0uswdx47M1scxNchAABt
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: QB_MucYsfUPcXzAPAABz
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: Ic_PSuay6QQhNdTjAABv
Player connected: Yl8AaW0udYnxRuJwAAB1
New socket connection: Yl8AaW0udYnxRuJwAAB1
üîß Registering submit_move handler for socket: Yl8AaW0udYnxRuJwAAB1
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: Yl8AaW0udYnxRuJwAAB1
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: j7Q8Hw3B9Kargz3cAABx
Player connected: IUP2NdWeOP4QiMfwAAB3
New socket connection: IUP2NdWeOP4QiMfwAAB3
üîß Registering submit_move handler for socket: IUP2NdWeOP4QiMfwAAB3
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: IUP2NdWeOP4QiMfwAAB3
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: QB_MucYsfUPcXzAPAABz
Player connected: GiVOqN8v91npWdXOAAB5
New socket connection: GiVOqN8v91npWdXOAAB5
üîß Registering submit_move handler for socket: GiVOqN8v91npWdXOAAB5
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: GiVOqN8v91npWdXOAAB5
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: Yl8AaW0udYnxRuJwAAB1
‚è∞ Countdown 3 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Socket disconnected: IUP2NdWeOP4QiMfwAAB3
Player connected: EFtw2iyHMcYOiprKAAB7
New socket connection: EFtw2iyHMcYOiprKAAB7
üîß Registering submit_move handler for socket: EFtw2iyHMcYOiprKAAB7
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: EFtw2iyHMcYOiprKAAB7
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: GiVOqN8v91npWdXOAAB5
Player connected: IGJnhHYwWfGnLqGZAAB9
New socket connection: IGJnhHYwWfGnLqGZAAB9
üîß Registering submit_move handler for socket: IGJnhHYwWfGnLqGZAAB9
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: IGJnhHYwWfGnLqGZAAB9
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
‚è∞ Countdown 2 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: Y7xs4Bn-t92XbBuNAAB_
New socket connection: Y7xs4Bn-t92XbBuNAAB_
üîß Registering submit_move handler for socket: Y7xs4Bn-t92XbBuNAAB_
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: Y7xs4Bn-t92XbBuNAAB_
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: EFtw2iyHMcYOiprKAAB7
Player connected: -QPa87H79dhmTgtmAACB
New socket connection: -QPa87H79dhmTgtmAACB
üîß Registering submit_move handler for socket: -QPa87H79dhmTgtmAACB
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: -QPa87H79dhmTgtmAACB
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: IGJnhHYwWfGnLqGZAAB9
‚è∞ Countdown 1 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Socket disconnected: Y7xs4Bn-t92XbBuNAAB_
Socket disconnected: -QPa87H79dhmTgtmAACB
‚è∞ Countdown 0 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Timer reached 0 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b, clearing timer
‚è∞ Time up for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
üé≤ Auto-assigning paper to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'paper' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'paper', player2Move: 'paper', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  gameState: {
    gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: '0DfqYIbf3BrQdW-XAAAz',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061090228
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'uk3qRNWEvKh6DSZsAAA9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061126089
    },
    currentRound: 5,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:51:30.228Z'
  },
  roundComplete: true,
  roundResult: {
    round: 5,
    moves: { player1: 'paper', player2: 'paper' },
    roundWinner: 'draw',
    gameWinner: null,
    scores: { player1: 2, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 6 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: 4RtlwWCXeQ6UTHKRAACD
New socket connection: 4RtlwWCXeQ6UTHKRAACD
üîß Registering submit_move handler for socket: 4RtlwWCXeQ6UTHKRAACD
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 4RtlwWCXeQ6UTHKRAACD
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: M-gbekho4k-7GxE3AACF
New socket connection: M-gbekho4k-7GxE3AACF
üîß Registering submit_move handler for socket: M-gbekho4k-7GxE3AACF
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: M-gbekho4k-7GxE3AACF
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: jDadBu-IF19gg76bAACH
New socket connection: jDadBu-IF19gg76bAACH
üîß Registering submit_move handler for socket: jDadBu-IF19gg76bAACH
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: jDadBu-IF19gg76bAACH
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: QR4Q-TQkwmnSOZTjAACJ
New socket connection: QR4Q-TQkwmnSOZTjAACJ
üîß Registering submit_move handler for socket: QR4Q-TQkwmnSOZTjAACJ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: QR4Q-TQkwmnSOZTjAACJ
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: 4RtlwWCXeQ6UTHKRAACD
Player connected: hJER9kldtNyARmpVAACL
New socket connection: hJER9kldtNyARmpVAACL
üîß Registering submit_move handler for socket: hJER9kldtNyARmpVAACL
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: hJER9kldtNyARmpVAACL
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: jZPpw16kc20bPC0FAACN
New socket connection: jZPpw16kc20bPC0FAACN
üîß Registering submit_move handler for socket: jZPpw16kc20bPC0FAACN
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: jZPpw16kc20bPC0FAACN
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: M-gbekho4k-7GxE3AACF
Socket disconnected: jDadBu-IF19gg76bAACH
Player connected: ZxpHDY-CLoQv16lXAACP
New socket connection: ZxpHDY-CLoQv16lXAACP
üîß Registering submit_move handler for socket: ZxpHDY-CLoQv16lXAACP
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: ZxpHDY-CLoQv16lXAACP
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: QR4Q-TQkwmnSOZTjAACJ
Player connected: FL_POuDdbF5nhiVFAACR
New socket connection: FL_POuDdbF5nhiVFAACR
üîß Registering submit_move handler for socket: FL_POuDdbF5nhiVFAACR
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: FL_POuDdbF5nhiVFAACR
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: hJER9kldtNyARmpVAACL
Socket disconnected: jZPpw16kc20bPC0FAACN
Socket disconnected: ZxpHDY-CLoQv16lXAACP
Socket disconnected: FL_POuDdbF5nhiVFAACR
Player connected: FGx1J2s6K1Ti6e2jAACT
New socket connection: FGx1J2s6K1Ti6e2jAACT
üîß Registering submit_move handler for socket: FGx1J2s6K1Ti6e2jAACT
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: FGx1J2s6K1Ti6e2jAACT
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Move submitted by 6ayLUKjR: scissors
‚è∞ Countdown 10 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Socket disconnected: FGx1J2s6K1Ti6e2jAACT
Player connected: vo2-g1JLtrHHzRuCAACV
New socket connection: vo2-g1JLtrHHzRuCAACV
üîß Registering submit_move handler for socket: vo2-g1JLtrHHzRuCAACV
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: vo2-g1JLtrHHzRuCAACV
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: 1i2ELiAueb5_UBUqAACX
New socket connection: 1i2ELiAueb5_UBUqAACX
üîß Registering submit_move handler for socket: 1i2ELiAueb5_UBUqAACX
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 1i2ELiAueb5_UBUqAACX
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: oyMabG1AQ9EDBo3aAACZ
New socket connection: oyMabG1AQ9EDBo3aAACZ
üîß Registering submit_move handler for socket: oyMabG1AQ9EDBo3aAACZ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: oyMabG1AQ9EDBo3aAACZ
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: vo2-g1JLtrHHzRuCAACV
Socket disconnected: 1i2ELiAueb5_UBUqAACX
Socket disconnected: oyMabG1AQ9EDBo3aAACZ
‚è∞ Countdown 5 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Countdown 3 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: dq5ebcRp0OVJs3ycAACb
New socket connection: dq5ebcRp0OVJs3ycAACb
üîß Registering submit_move handler for socket: dq5ebcRp0OVJs3ycAACb
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: dq5ebcRp0OVJs3ycAACb
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
‚è∞ Countdown 2 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: 4BDLM-fOHOanDGB_AACd
New socket connection: 4BDLM-fOHOanDGB_AACd
üîß Registering submit_move handler for socket: 4BDLM-fOHOanDGB_AACd
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 4BDLM-fOHOanDGB_AACd
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: WnQPZN_2tzLXqXW7AACf
New socket connection: WnQPZN_2tzLXqXW7AACf
üîß Registering submit_move handler for socket: WnQPZN_2tzLXqXW7AACf
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: WnQPZN_2tzLXqXW7AACf
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: lhJw-1j8w1sCRpu6AACh
New socket connection: lhJw-1j8w1sCRpu6AACh
üîß Registering submit_move handler for socket: lhJw-1j8w1sCRpu6AACh
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: lhJw-1j8w1sCRpu6AACh
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: dq5ebcRp0OVJs3ycAACb
‚è∞ Countdown 1 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: QEeJjqvqI7weko1YAACj
New socket connection: QEeJjqvqI7weko1YAACj
üîß Registering submit_move handler for socket: QEeJjqvqI7weko1YAACj
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: QEeJjqvqI7weko1YAACj
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: 4BDLM-fOHOanDGB_AACd
Player connected: c7QwIinYyoSCfPHuAACl
New socket connection: c7QwIinYyoSCfPHuAACl
üîß Registering submit_move handler for socket: c7QwIinYyoSCfPHuAACl
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: c7QwIinYyoSCfPHuAACl
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: WnQPZN_2tzLXqXW7AACf
Player connected: LFYSMlVUEiCTS5y9AACn
New socket connection: LFYSMlVUEiCTS5y9AACn
üîß Registering submit_move handler for socket: LFYSMlVUEiCTS5y9AACn
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: LFYSMlVUEiCTS5y9AACn
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: lhJw-1j8w1sCRpu6AACh
‚è∞ Countdown 0 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Timer reached 0 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b, clearing timer
‚è∞ Time up for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
üé≤ Auto-assigning scissors to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'scissors' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: scissors
processRoundDirectly result: {
  success: true,
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  gameState: {
    gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: '0DfqYIbf3BrQdW-XAAAz',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061090228
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'uk3qRNWEvKh6DSZsAAA9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061126089
    },
    currentRound: 6,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:51:30.228Z'
  },
  roundComplete: true,
  roundResult: {
    round: 6,
    moves: { player1: 'scissors', player2: 'scissors' },
    roundWinner: 'draw',
    gameWinner: null,
    scores: { player1: 2, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
Socket disconnected: QEeJjqvqI7weko1YAACj
Socket disconnected: c7QwIinYyoSCfPHuAACl
Socket disconnected: LFYSMlVUEiCTS5y9AACn
üîÑ Starting round 7 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Starting round timer for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b with duration 15s
‚è∞ Timer created for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: PIFVzTMPSPdcYXi5AACp
New socket connection: PIFVzTMPSPdcYXi5AACp
üîß Registering submit_move handler for socket: PIFVzTMPSPdcYXi5AACp
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: PIFVzTMPSPdcYXi5AACp
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Move submitted by 6ayLUKjR: scissors
Socket disconnected: PIFVzTMPSPdcYXi5AACp
Player connected: nCOAgDREQRS049S1AACr
New socket connection: nCOAgDREQRS049S1AACr
üîß Registering submit_move handler for socket: nCOAgDREQRS049S1AACr
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: nCOAgDREQRS049S1AACr
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: UIBGiHFCMp-pJeh9AACt
New socket connection: UIBGiHFCMp-pJeh9AACt
üîß Registering submit_move handler for socket: UIBGiHFCMp-pJeh9AACt
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: UIBGiHFCMp-pJeh9AACt
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: 7Y_OZVmwPP-bHpbjAACv
New socket connection: 7Y_OZVmwPP-bHpbjAACv
üîß Registering submit_move handler for socket: 7Y_OZVmwPP-bHpbjAACv
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: 7Y_OZVmwPP-bHpbjAACv
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: GaKSA63-7_9-XXWYAACx
New socket connection: GaKSA63-7_9-XXWYAACx
üîß Registering submit_move handler for socket: GaKSA63-7_9-XXWYAACx
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: GaKSA63-7_9-XXWYAACx
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: nCOAgDREQRS049S1AACr
‚è∞ Countdown 10 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Socket disconnected: UIBGiHFCMp-pJeh9AACt
Socket disconnected: 7Y_OZVmwPP-bHpbjAACv
Socket disconnected: GaKSA63-7_9-XXWYAACx
Player connected: S3StLDKIf0dKrSbrAACz
New socket connection: S3StLDKIf0dKrSbrAACz
üîß Registering submit_move handler for socket: S3StLDKIf0dKrSbrAACz
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: S3StLDKIf0dKrSbrAACz
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Player connected: FxYLBxTCY-RMtxz4AAC1
New socket connection: FxYLBxTCY-RMtxz4AAC1
üîß Registering submit_move handler for socket: FxYLBxTCY-RMtxz4AAC1
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: FxYLBxTCY-RMtxz4AAC1
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
‚è∞ Countdown 5 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
Player connected: LUTeZ4I0bBNBmzYLAAC3
New socket connection: LUTeZ4I0bBNBmzYLAAC3
üîß Registering submit_move handler for socket: LUTeZ4I0bBNBmzYLAAC3
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: LUTeZ4I0bBNBmzYLAAC3
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [ [ '6ayLUKjR', '6541e3f9-557d-4dc9-9e9e-3295d3870c9b' ] ]
Player "7kU8bVxK" not found in playerGames map
Socket disconnected: S3StLDKIf0dKrSbrAACz
Socket disconnected: FxYLBxTCY-RMtxz4AAC1
Socket disconnected: LUTeZ4I0bBNBmzYLAAC3
‚è∞ Countdown 3 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Countdown 2 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Countdown 1 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Countdown 0 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
‚è∞ Timer reached 0 for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b, clearing timer
‚è∞ Time up for game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
üé≤ Auto-assigning paper to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'paper' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'paper',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
üèÜ Player 2 wins! ID: 6ayLUKjR, Wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
processRoundDirectly result: {
  success: true,
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  gameState: {
    gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: '0DfqYIbf3BrQdW-XAAAz',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061090228
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'uk3qRNWEvKh6DSZsAAA9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 3,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061126089
    },
    currentRound: 7,
    gameStatus: 'finished',
    winner: '6ayLUKjR',
    moveHistory: [
      [Object], [Object],
      [Object], [Object],
      [Object], [Object],
      [Object]
    ],
    createdAt: '2025-10-10T01:51:30.228Z'
  },
  roundComplete: true,
  roundResult: {
    round: 7,
    moves: { player1: 'paper', player2: 'scissors' },
    roundWinner: 'player2',
    gameWinner: 'player2',
    scores: { player1: 2, player2: 3 },
    gameFinished: true
  }
}
Round completed via timeout, emitting round_completed event
üèÅ Game finished: 6541e3f9-557d-4dc9-9e9e-3295d3870c9b, Winner: 6ayLUKjR
üîç Game state details: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  winner: '6ayLUKjR',
  currency: 'sol',
  player1: {
    id: '7kU8bVxK',
    wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
  },
  player2: {
    id: '6ayLUKjR',
    wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt'
  },
  processed: undefined
}
‚úÖ Processing game completion for 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
üéØ Round result: {
  gameWinner: 'player2',
  gameFinished: true,
  round: 7,
  moves: { player1: null, player2: null },
  roundWinner: null,
  scores: { player1: 2, player2: 3 }
}
üöÄ Calling gameManager.processGameCompletion...
üéÆ Processing sol game completion: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  winner: 'player2',
  winnerWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  currency: 'sol',
  player1Wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  player2Wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt'
}
üîç About to check currency condition: gameState.currency = "sol"
üöÄ SOL game completed - implementing auto-finalization
üîç Currency check passed: sol === 'sol'
Winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
Should receive: 0.02 SOL (total pot minus platform fee)
Triggering auto-finalization...
Updating database stats - Winner gets 100 bonus points
üéØ Updated stats for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL: {
  won: false,
  currency: 'sol',
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  newBalance: 2100,
  totalEarned: 1800,
  totalGames: 49
}
üéØ Updated stats for 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt: {
  won: true,
  currency: 'sol',
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  newBalance: 1300,
  totalEarned: 1300,
  totalGames: 22
}
Database stats updated: {
  player1: { won: false, newBalance: 2100 },
  player2: { won: true, newBalance: 1300 }
}
üí∞ SOL referral commission will be processed during auto-finalization
üöÄ Calling auto-finalization service...
üéØ Auto-finalization parameters: {
  gameId: '6541e3f9-557d-4dc9-9e9e-3295d3870c9b',
  winnerWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  loserWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  stakeAmount: 0.01
}
üöÄ ===== STARTING AUTO-FINALIZATION =====
üìã Game ID: 6541e3f9-557d-4dc9-9e9e-3295d3870c9b
üèÜ Winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üí∏ Stake: 0.01 SOL
‚è∞ Timestamp: 2025-10-10T01:53:44.115Z
üîç Finding PDA for gameId: "6541e3f9-557d-4dc9-9e9e-3295d3870c9b" -> truncated: "6541e3f9-557d-4dc9-9e9e-3295d387"
üéØ Game PDA: 794jFxff7z7LDbTTfaiZZSSHGXNqutG4NeYzitjsEMKD
üîß Game account not found on-chain - skipping blockchain creation, using direct finalization...
üí∞ Proceeding with direct SOL transfer without blockchain game...
üë§ Player1 (Winner): 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üë§ Player2 (Loser): 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üí∞ Processing SOL referral commission for 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt - Total pot: 0.02 SOL, Stake: 0.01 SOL
‚úÖ SOL referral commission processed: {
  referrer: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  commission: 0.0002,
  platformFeeRate: 0.04,
  referrerFeeRate: 0.01
}
üéØ Referrer found: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK, Commission: 0.0002 SOL
üíµ Transfer calculations:
  Total pot: 0.02 SOL
  Fee rate: 5%
  Platform fee: 0.0008 SOL
  Referrer commission: 0.0002 SOL
  Base winner amount: 0.019000000000000003 SOL
  No fee compensation - users pay own fees
  Final winner amount: 0.019000000000000003 SOL
üí∏ Direct SOL transfer:
   Total pot: 0.020 SOL
   Platform fee: 0.001 SOL
   Referrer commission: 0.000 SOL
   Winner receives: 0.019 SOL
   Winner wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Platform wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Referrer wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∏ Creating real SOL transfer transactions...
üíé Added referrer transfer: 0.000200 SOL to CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üöÄ Sending transfer transaction...
üí∞ Real SOL transfer completed: 3woK2xsqoZ2dmeT15GkuofXfeFS1GNJ6yyfA1ZQtRcX86SEVJdYVcaTRjAKFtoyhYZki2Ap7qGg6LhkV24Eiu38W
‚úÖ 0.019000 SOL sent to winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.000800 SOL sent to platform: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.000200 SOL sent to referrer: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üéâ ===== AUTO-FINALIZATION SUCCESS =====
‚úÖ Auto-finalization result: true
üéâ Auto-finalization successful
üí∞ Winner 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt should now have 0.02 SOL
üöÄ Winner receives SOL automatically
Socket disconnected: 0DfqYIbf3BrQdW-XAAAz
Player connected: t3vL68wNyl_M8g75AAC5
New socket connection: t3vL68wNyl_M8g75AAC5
üîß Registering submit_move handler for socket: t3vL68wNyl_M8g75AAC5
Socket disconnected: t3vL68wNyl_M8g75AAC5
Player connected: epAryvOf5dO9L6eBAAC7
New socket connection: epAryvOf5dO9L6eBAAC7
üîß Registering submit_move handler for socket: epAryvOf5dO9L6eBAAC7
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 140,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 123,
  finishedGames: 1
}
Player ID set from find_random_match: 7kU8bVxK
Adding player 7kU8bVxK to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 (300000ms)
Created waiting game for player 7kU8bVxK: 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Random match for 7kU8bVxK: 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 (sol game)
Socket disconnected: Ta6gtwWxhRYdaAWtAABD
Player connected: a-S2fTWiHnNKZDNCAAC9
New socket connection: a-S2fTWiHnNKZDNCAAC9
üîß Registering submit_move handler for socket: a-S2fTWiHnNKZDNCAAC9
Player ID set from find_random_match: 6ayLUKjR
üßπ Cleaning up old finished game 6541e3f9-557d-4dc9-9e9e-3295d3870c9b for player 6ayLUKjR
Found existing public game for player 6ayLUKjR: 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 - second player joined
Player 6ayLUKjR joined sol game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Updated playerGames map: [
  [ '7kU8bVxK', '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01' ],
  [ '6ayLUKjR', '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01' ]
]
Random match for 6ayLUKjR: 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 (sol game)
‚è∞ Starting round timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 with duration 15s
‚è∞ Timer created for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player connected: Z1UfuglLmf1eu4btAAC_
New socket connection: Z1UfuglLmf1eu4btAAC_
üîß Registering submit_move handler for socket: Z1UfuglLmf1eu4btAAC_
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: Z1UfuglLmf1eu4btAAC_
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ '7kU8bVxK', '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01' ],
  [ '6ayLUKjR', '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01' ]
]
Move submitted by 6ayLUKjR: scissors
Socket disconnected: Z1UfuglLmf1eu4btAAC_
Player connected: 5l5MEC6Aj-z1EukWAADB
New socket connection: 5l5MEC6Aj-z1EukWAADB
üîß Registering submit_move handler for socket: 5l5MEC6Aj-z1EukWAADB
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: 5l5MEC6Aj-z1EukWAADB
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [
  [ '7kU8bVxK', '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01' ],
  [ '6ayLUKjR', '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01' ]
]
Move submitted by 7kU8bVxK: scissors
Socket disconnected: 5l5MEC6Aj-z1EukWAADB
üîÑ Starting round 2 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Starting round timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 with duration 15s
‚è∞ Timer created for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player connected: MFylbk-gIRXkF_iOAADD
New socket connection: MFylbk-gIRXkF_iOAADD
üîß Registering submit_move handler for socket: MFylbk-gIRXkF_iOAADD
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: MFylbk-gIRXkF_iOAADD
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Socket disconnected: MFylbk-gIRXkF_iOAADD
Player connected: IvQ0Oprn4b7Qt8hbAADF
New socket connection: IvQ0Oprn4b7Qt8hbAADF
üîß Registering submit_move handler for socket: IvQ0Oprn4b7Qt8hbAADF
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: IvQ0Oprn4b7Qt8hbAADF
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Player connected: gOkpij8h2kI5aTgaAADH
New socket connection: gOkpij8h2kI5aTgaAADH
üîß Registering submit_move handler for socket: gOkpij8h2kI5aTgaAADH
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: gOkpij8h2kI5aTgaAADH
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Player connected: ny9t6WSboJwJwofIAADJ
New socket connection: ny9t6WSboJwJwofIAADJ
üîß Registering submit_move handler for socket: ny9t6WSboJwJwofIAADJ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: ny9t6WSboJwJwofIAADJ
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Socket disconnected: IvQ0Oprn4b7Qt8hbAADF
Socket disconnected: gOkpij8h2kI5aTgaAADH
Socket disconnected: ny9t6WSboJwJwofIAADJ
Player connected: g5h6zxvoexw9IDy6AADL
New socket connection: g5h6zxvoexw9IDy6AADL
üîß Registering submit_move handler for socket: g5h6zxvoexw9IDy6AADL
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: g5h6zxvoexw9IDy6AADL
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: C20rxBigPdLdQN3BAADN
New socket connection: C20rxBigPdLdQN3BAADN
üîß Registering submit_move handler for socket: C20rxBigPdLdQN3BAADN
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: C20rxBigPdLdQN3BAADN
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: 59Omc7PBVzSf1wuvAADP
New socket connection: 59Omc7PBVzSf1wuvAADP
üîß Registering submit_move handler for socket: 59Omc7PBVzSf1wuvAADP
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: 59Omc7PBVzSf1wuvAADP
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: Nvv6IoEhXFJ8hjHzAADR
New socket connection: Nvv6IoEhXFJ8hjHzAADR
üîß Registering submit_move handler for socket: Nvv6IoEhXFJ8hjHzAADR
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: Nvv6IoEhXFJ8hjHzAADR
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: E5YwfbNYyQDOUL9vAADT
New socket connection: E5YwfbNYyQDOUL9vAADT
üîß Registering submit_move handler for socket: E5YwfbNYyQDOUL9vAADT
Socket disconnected: g5h6zxvoexw9IDy6AADL
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: E5YwfbNYyQDOUL9vAADT
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: OlxIthb5borF3bS7AADV
New socket connection: OlxIthb5borF3bS7AADV
üîß Registering submit_move handler for socket: OlxIthb5borF3bS7AADV
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: OlxIthb5borF3bS7AADV
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: rcdr5_rfs-ohEbbTAADX
New socket connection: rcdr5_rfs-ohEbbTAADX
üîß Registering submit_move handler for socket: rcdr5_rfs-ohEbbTAADX
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: rcdr5_rfs-ohEbbTAADX
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
Player connected: DnM_FDii6mJRS6tUAADZ
New socket connection: DnM_FDii6mJRS6tUAADZ
üîß Registering submit_move handler for socket: DnM_FDii6mJRS6tUAADZ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: DnM_FDii6mJRS6tUAADZ
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: []
Player "7kU8bVxK" not found in playerGames map
‚è∞ Countdown 10 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: C20rxBigPdLdQN3BAADN
Socket disconnected: 59Omc7PBVzSf1wuvAADP
Socket disconnected: Nvv6IoEhXFJ8hjHzAADR
Socket disconnected: E5YwfbNYyQDOUL9vAADT
Socket disconnected: OlxIthb5borF3bS7AADV
Player connected: 8MxmdDS1njDlvYhYAADb
New socket connection: 8MxmdDS1njDlvYhYAADb
üîß Registering submit_move handler for socket: 8MxmdDS1njDlvYhYAADb
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 8MxmdDS1njDlvYhYAADb
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Player connected: 9yUP7lZ6TCvJxQ6_AADd
New socket connection: 9yUP7lZ6TCvJxQ6_AADd
üîß Registering submit_move handler for socket: 9yUP7lZ6TCvJxQ6_AADd
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 9yUP7lZ6TCvJxQ6_AADd
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Socket disconnected: rcdr5_rfs-ohEbbTAADX
Player connected: a75AqT631pX0uRBrAADf
New socket connection: a75AqT631pX0uRBrAADf
üîß Registering submit_move handler for socket: a75AqT631pX0uRBrAADf
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: a75AqT631pX0uRBrAADf
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Socket disconnected: DnM_FDii6mJRS6tUAADZ
Player connected: 2JdAptWVkEIdIgf9AADh
New socket connection: 2JdAptWVkEIdIgf9AADh
üîß Registering submit_move handler for socket: 2JdAptWVkEIdIgf9AADh
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 2JdAptWVkEIdIgf9AADh
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Socket disconnected: 8MxmdDS1njDlvYhYAADb
Player connected: WmVRz1VSq1z4f2gaAADj
New socket connection: WmVRz1VSq1z4f2gaAADj
üîß Registering submit_move handler for socket: WmVRz1VSq1z4f2gaAADj
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: WmVRz1VSq1z4f2gaAADj
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: []
Player "6ayLUKjR" not found in playerGames map
Socket disconnected: 9yUP7lZ6TCvJxQ6_AADd
Socket disconnected: a75AqT631pX0uRBrAADf
Socket disconnected: 2JdAptWVkEIdIgf9AADh
Socket disconnected: WmVRz1VSq1z4f2gaAADj
Socket disconnected: a-S2fTWiHnNKZDNCAAC9
Player connected: yqMpJp3-XurZCjQLAADl
New socket connection: yqMpJp3-XurZCjQLAADl
üîß Registering submit_move handler for socket: yqMpJp3-XurZCjQLAADl
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 0,
  totalGames: 140,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 123,
  finishedGames: 0
}
‚è∞ Countdown 5 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: epAryvOf5dO9L6eBAAC7
‚è∞ Countdown 3 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player connected: 0yPUcSEfj_qQL_g7AADn
New socket connection: 0yPUcSEfj_qQL_g7AADn
üîß Registering submit_move handler for socket: 0yPUcSEfj_qQL_g7AADn
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 0,
  totalGames: 140,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 123,
  finishedGames: 0
}
‚è∞ Countdown 2 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 1 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Timer reached 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01, clearing timer
‚è∞ Time up for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üé≤ Auto-assigning scissors to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'scissors' },
  { playerId: '6ayLUKjR', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'paper',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: scissors
üì§ Emitting move_submitted for 6ayLUKjR: paper
processRoundDirectly result: {
  success: true,
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  gameState: {
    gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061235637
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'a-S2fTWiHnNKZDNCAAC9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 0,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061249599
    },
    currentRound: 2,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object] ],
    createdAt: '2025-10-10T01:53:55.637Z'
  },
  roundComplete: true,
  roundResult: {
    round: 2,
    moves: { player1: 'scissors', player2: 'paper' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 1, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
Socket disconnected: uk3qRNWEvKh6DSZsAAA9
Player connected: fBU80Vi2cpQ13aJXAADp
New socket connection: fBU80Vi2cpQ13aJXAADp
üîß Registering submit_move handler for socket: fBU80Vi2cpQ13aJXAADp
üîÑ Starting round 3 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Starting round timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 with duration 15s
‚è∞ Timer created for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: fBU80Vi2cpQ13aJXAADp
Socket disconnected: yqMpJp3-XurZCjQLAADl
Player connected: SAcobtQCJShKWiDJAADr
New socket connection: SAcobtQCJShKWiDJAADr
üîß Registering submit_move handler for socket: SAcobtQCJShKWiDJAADr
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 0,
  totalGames: 140,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 123,
  finishedGames: 0
}
‚è∞ Countdown 10 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: 0yPUcSEfj_qQL_g7AADn
Player connected: 7DRBYtbguMuWI3DxAADt
New socket connection: 7DRBYtbguMuWI3DxAADt
üîß Registering submit_move handler for socket: 7DRBYtbguMuWI3DxAADt
üìä Combined stats: {
  activeGames: 1,
  waitingGames: 0,
  totalPlayers: 0,
  totalGames: 140,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 123,
  finishedGames: 0
}
‚è∞ Countdown 5 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 3 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player ID set from find_random_match: 6ayLUKjR
Adding player 6ayLUKjR to matchmaking queue
Creating SOL game with stake 0.1 SOL
‚è∞ Started timeout timer for public game edd66430-fb1c-4e62-a52e-835cca935985 (300000ms)
Created waiting game for player 6ayLUKjR: edd66430-fb1c-4e62-a52e-835cca935985
Random match for 6ayLUKjR: edd66430-fb1c-4e62-a52e-835cca935985 (sol game)
‚è∞ Countdown 2 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 1 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Timer reached 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01, clearing timer
‚è∞ Time up for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning scissors to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'paper' },
  { playerId: '6ayLUKjR', move: 'scissors' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'paper',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
üì§ Emitting move_submitted for 6ayLUKjR: scissors
processRoundDirectly result: {
  success: true,
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  gameState: {
    gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061235637
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'a-S2fTWiHnNKZDNCAAC9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061249599
    },
    currentRound: 3,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:53:55.637Z'
  },
  roundComplete: true,
  roundResult: {
    round: 3,
    moves: { player1: 'paper', player2: 'scissors' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 1, player2: 1 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 4 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Starting round timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 with duration 15s
‚è∞ Timer created for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player ID set from find_random_match: 7kU8bVxK
Found existing public game for player 7kU8bVxK: edd66430-fb1c-4e62-a52e-835cca935985
Joining SOL game with stake 0.1 SOL
‚è∞ Cleared timeout timer for game edd66430-fb1c-4e62-a52e-835cca935985 - second player joined
Player 7kU8bVxK joined sol game edd66430-fb1c-4e62-a52e-835cca935985
Updated playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
Random match for 7kU8bVxK: edd66430-fb1c-4e62-a52e-835cca935985 (sol game)
‚è∞ Starting round timer for game edd66430-fb1c-4e62-a52e-835cca935985 with duration 15s
‚è∞ Timer created for game edd66430-fb1c-4e62-a52e-835cca935985
Player connected: ZyFqN2EkhtChuccmAADv
New socket connection: ZyFqN2EkhtChuccmAADv
üîß Registering submit_move handler for socket: ZyFqN2EkhtChuccmAADv
SUBMIT_MOVE EVENT RECEIVED {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: ZyFqN2EkhtChuccmAADv
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
Move submitted by 6ayLUKjR: scissors
‚è∞ Countdown 10 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: ZyFqN2EkhtChuccmAADv
Player connected: yjRZFMsS3qoJrTJvAADx
New socket connection: yjRZFMsS3qoJrTJvAADx
üîß Registering submit_move handler for socket: yjRZFMsS3qoJrTJvAADx
SUBMIT_MOVE EVENT RECEIVED {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '7kU8bVxK',
  move: 'paper'
}
Move submission received: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '7kU8bVxK',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: yjRZFMsS3qoJrTJvAADx
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: paper
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "paper"
   - playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
Move submitted by 7kU8bVxK: paper
Socket disconnected: yjRZFMsS3qoJrTJvAADx
‚è∞ Countdown 5 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üîÑ Starting round 2 for game edd66430-fb1c-4e62-a52e-835cca935985
‚è∞ Starting round timer for game edd66430-fb1c-4e62-a52e-835cca935985 with duration 15s
‚è∞ Timer created for game edd66430-fb1c-4e62-a52e-835cca935985
Player connected: x_PxwWI--BSeLHsfAADz
New socket connection: x_PxwWI--BSeLHsfAADz
üîß Registering submit_move handler for socket: x_PxwWI--BSeLHsfAADz
SUBMIT_MOVE EVENT RECEIVED {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '6ayLUKjR',
  move: 'rock'
}
Move submission received: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '6ayLUKjR',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: x_PxwWI--BSeLHsfAADz
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: rock
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "rock"
   - playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
Move submitted by 6ayLUKjR: rock
‚è∞ Countdown 3 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: x_PxwWI--BSeLHsfAADz
Player connected: 30H8xfFVBGcHu05dAAD1
New socket connection: 30H8xfFVBGcHu05dAAD1
üîß Registering submit_move handler for socket: 30H8xfFVBGcHu05dAAD1
SUBMIT_MOVE EVENT RECEIVED {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
Move submission received: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '7kU8bVxK',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: 30H8xfFVBGcHu05dAAD1
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: scissors
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "scissors"
   - playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
Move submitted by 7kU8bVxK: scissors
‚è∞ Countdown 2 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: 30H8xfFVBGcHu05dAAD1
‚è∞ Countdown 1 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Timer reached 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01, clearing timer
‚è∞ Time up for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üé≤ Auto-assigning rock to player1
üé≤ Auto-assigning paper to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'rock' },
  { playerId: '6ayLUKjR', move: 'paper' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'paper', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: rock
üì§ Emitting move_submitted for 6ayLUKjR: paper
processRoundDirectly result: {
  success: true,
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  gameState: {
    gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061235637
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'a-S2fTWiHnNKZDNCAAC9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061249599
    },
    currentRound: 4,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:53:55.637Z'
  },
  roundComplete: true,
  roundResult: {
    round: 4,
    moves: { player1: 'rock', player2: 'paper' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 1, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 3 for game edd66430-fb1c-4e62-a52e-835cca935985
‚è∞ Starting round timer for game edd66430-fb1c-4e62-a52e-835cca935985 with duration 15s
‚è∞ Timer created for game edd66430-fb1c-4e62-a52e-835cca935985
Player connected: 9DU6IiYxCjoq3JcDAAD3
New socket connection: 9DU6IiYxCjoq3JcDAAD3
üîß Registering submit_move handler for socket: 9DU6IiYxCjoq3JcDAAD3
SUBMIT_MOVE EVENT RECEIVED {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '6ayLUKjR',
  move: 'paper'
}
Move submission received: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '6ayLUKjR',
  move: 'paper'
}
   - Current playerId: null
   - Socket ID: 9DU6IiYxCjoq3JcDAAD3
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: paper
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "paper"
   - playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
Move submitted by 6ayLUKjR: paper
Socket disconnected: 9DU6IiYxCjoq3JcDAAD3
Player connected: 3bMJXM9TVEl9_0CHAAD5
New socket connection: 3bMJXM9TVEl9_0CHAAD5
üîß Registering submit_move handler for socket: 3bMJXM9TVEl9_0CHAAD5
SUBMIT_MOVE EVENT RECEIVED {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '7kU8bVxK',
  move: 'rock'
}
Move submission received: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  playerId: '7kU8bVxK',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: 3bMJXM9TVEl9_0CHAAD5
   - Data playerId: 7kU8bVxK
   - Final playerId for move: 7kU8bVxK
   - Move: rock
GameManager.submitMove called:
   - playerId: "7kU8bVxK"
   - move: "rock"
   - playerGames map: [
  [ '6ayLUKjR', 'edd66430-fb1c-4e62-a52e-835cca935985' ],
  [ '7kU8bVxK', 'edd66430-fb1c-4e62-a52e-835cca935985' ]
]
üèÜ Player 1 wins! ID: 6ayLUKjR, Wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üéÆ Game edd66430-fb1c-4e62-a52e-835cca935985 finished, will be processed by socket handler
Move submitted by 7kU8bVxK: rock
üèÅ Game finished: edd66430-fb1c-4e62-a52e-835cca935985, Winner: 6ayLUKjR
üîç Game state details: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  winner: '6ayLUKjR',
  currency: 'sol',
  player1: {
    id: '6ayLUKjR',
    wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt'
  },
  player2: {
    id: '7kU8bVxK',
    wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
  },
  processed: undefined
}
‚úÖ Processing game completion for edd66430-fb1c-4e62-a52e-835cca935985
üéØ Round result: {
  gameWinner: 'player1',
  gameFinished: true,
  round: 3,
  moves: { player1: null, player2: null },
  roundWinner: null,
  scores: { player1: 3, player2: 0 }
}
üöÄ Calling gameManager.processGameCompletion...
üéÆ Processing sol game completion: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  winner: 'player1',
  winnerWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  currency: 'sol',
  player1Wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  player2Wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
}
üîç About to check currency condition: gameState.currency = "sol"
üöÄ SOL game completed - implementing auto-finalization
üîç Currency check passed: sol === 'sol'
Winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
Should receive: 0.2 SOL (total pot minus platform fee)
Triggering auto-finalization...
Updating database stats - Winner gets 100 bonus points
üéØ Updated stats for 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt: {
  won: true,
  currency: 'sol',
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  newBalance: 1400,
  totalEarned: 1400,
  totalGames: 23
}
üéØ Updated stats for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL: {
  won: false,
  currency: 'sol',
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  newBalance: 2100,
  totalEarned: 1800,
  totalGames: 50
}
Database stats updated: {
  player1: { won: true, newBalance: 1400 },
  player2: { won: false, newBalance: 2100 }
}
üí∞ SOL referral commission will be processed during auto-finalization
üöÄ Calling auto-finalization service...
üéØ Auto-finalization parameters: {
  gameId: 'edd66430-fb1c-4e62-a52e-835cca935985',
  winnerWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  loserWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  stakeAmount: 0.1
}
üöÄ ===== STARTING AUTO-FINALIZATION =====
üìã Game ID: edd66430-fb1c-4e62-a52e-835cca935985
üèÜ Winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üí∏ Stake: 0.1 SOL
‚è∞ Timestamp: 2025-10-10T01:55:17.722Z
üîç Finding PDA for gameId: "edd66430-fb1c-4e62-a52e-835cca935985" -> truncated: "edd66430-fb1c-4e62-a52e-835cca93"
üéØ Game PDA: FKcHgSspefiYoLDSsjv5wyUQTNZe5qACEziToa6GVftd
üîß Game account not found on-chain - skipping blockchain creation, using direct finalization...
üí∞ Proceeding with direct SOL transfer without blockchain game...
üë§ Player1 (Winner): 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üë§ Player2 (Loser): 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üí∞ Processing SOL referral commission for 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt - Total pot: 0.2 SOL, Stake: 0.1 SOL
‚úÖ SOL referral commission processed: {
  referrer: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  commission: 0.002,
  platformFeeRate: 0.01,
  referrerFeeRate: 0.01
}
üéØ Referrer found: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK, Commission: 0.002 SOL
üíµ Transfer calculations:
  Total pot: 0.2 SOL
  Fee rate: 2%
  Platform fee: 0.002 SOL
  Referrer commission: 0.002 SOL
  Base winner amount: 0.196 SOL
  No fee compensation - users pay own fees
  Final winner amount: 0.196 SOL
üí∏ Direct SOL transfer:
   Total pot: 0.200 SOL
   Platform fee: 0.002 SOL
   Referrer commission: 0.002 SOL
   Winner receives: 0.196 SOL
   Winner wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Platform wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Referrer wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∏ Creating real SOL transfer transactions...
üíé Added referrer transfer: 0.002000 SOL to CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üöÄ Sending transfer transaction...
üîÑ Starting round 5 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Starting round timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 with duration 15s
‚è∞ Timer created for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Socket disconnected: 3bMJXM9TVEl9_0CHAAD5
üí∞ Real SOL transfer completed: 4ZBSng1WiZ7BfgSwihNPTvevuHnRHC7iMpDMKK6Jt12aa77vF84XaJ1kD7Vagf4uFgHj6ms48yhr1yqjs6uAdxZP
‚úÖ 0.196000 SOL sent to winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.002000 SOL sent to platform: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.002000 SOL sent to referrer: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üéâ ===== AUTO-FINALIZATION SUCCESS =====
‚úÖ Auto-finalization result: true
üéâ Auto-finalization successful
üí∞ Winner 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt should now have 0.2 SOL
üöÄ Winner receives SOL automatically
Socket disconnected: SAcobtQCJShKWiDJAADr
Player connected: eFq4jwr01NEmrP3MAAD7
New socket connection: eFq4jwr01NEmrP3MAAD7
üîß Registering submit_move handler for socket: eFq4jwr01NEmrP3MAAD7
Socket disconnected: 7DRBYtbguMuWI3DxAADt
Player connected: 0y-lHf1SR-iDhA1bAAD9
New socket connection: 0y-lHf1SR-iDhA1bAAD9
üîß Registering submit_move handler for socket: 0y-lHf1SR-iDhA1bAAD9
‚è∞ Countdown 10 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player ID set from find_random_match: 6ayLUKjR
üßπ Cleaning up old finished game edd66430-fb1c-4e62-a52e-835cca935985 for player 6ayLUKjR
Adding player 6ayLUKjR to matchmaking queue
Creating SOL game with stake 0.05 SOL
‚è∞ Started timeout timer for public game 96ce7d48-8f70-4597-b6fd-3e222400b6b0 (300000ms)
Created waiting game for player 6ayLUKjR: 96ce7d48-8f70-4597-b6fd-3e222400b6b0
Random match for 6ayLUKjR: 96ce7d48-8f70-4597-b6fd-3e222400b6b0 (sol game)
‚è∞ Countdown 5 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 3 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 2 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 1 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Timer reached 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01, clearing timer
‚è∞ Time up for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning rock to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'paper' },
  { playerId: '6ayLUKjR', move: 'rock' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'paper', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
üì§ Emitting move_submitted for 6ayLUKjR: rock
processRoundDirectly result: {
  success: true,
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  gameState: {
    gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061235637
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'a-S2fTWiHnNKZDNCAAC9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061249599
    },
    currentRound: 5,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:53:55.637Z'
  },
  roundComplete: true,
  roundResult: {
    round: 5,
    moves: { player1: 'paper', player2: 'rock' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 2, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 6 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Starting round timer for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01 with duration 15s
‚è∞ Timer created for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
Player ID set from find_random_match: 7kU8bVxK
üßπ Cleaning up old finished game edd66430-fb1c-4e62-a52e-835cca935985 for player 7kU8bVxK
Found existing public game for player 7kU8bVxK: 96ce7d48-8f70-4597-b6fd-3e222400b6b0
Joining SOL game with stake 0.05 SOL
‚è∞ Cleared timeout timer for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0 - second player joined
Player 7kU8bVxK joined sol game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
Updated playerGames map: [
  [ '6ayLUKjR', '96ce7d48-8f70-4597-b6fd-3e222400b6b0' ],
  [ '7kU8bVxK', '96ce7d48-8f70-4597-b6fd-3e222400b6b0' ]
]
Random match for 7kU8bVxK: 96ce7d48-8f70-4597-b6fd-3e222400b6b0 (sol game)
‚è∞ Starting round timer for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0 with duration 15s
‚è∞ Timer created for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚è∞ Countdown 10 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 10 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚è∞ Countdown 5 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 3 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 5 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚è∞ Countdown 2 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 1 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Countdown 3 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚è∞ Countdown 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
‚è∞ Timer reached 0 for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01, clearing timer
‚è∞ Time up for game 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üé≤ Auto-assigning paper to player1
üé≤ Auto-assigning scissors to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '7kU8bVxK', move: 'paper' },
  { playerId: '6ayLUKjR', move: 'scissors' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'paper',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
üì§ Emitting move_submitted for 6ayLUKjR: scissors
üèÜ Player 2 wins! ID: 6ayLUKjR, Wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
processRoundDirectly result: {
  success: true,
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  gameState: {
    gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 2,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061235637
    },
    player2: {
      id: '6ayLUKjR',
      socketId: 'a-S2fTWiHnNKZDNCAAC9',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 3,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061249599
    },
    currentRound: 6,
    gameStatus: 'finished',
    winner: '6ayLUKjR',
    moveHistory: [ [Object], [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T01:53:55.637Z'
  },
  roundComplete: true,
  roundResult: {
    round: 6,
    moves: { player1: 'paper', player2: 'scissors' },
    roundWinner: 'player2',
    gameWinner: 'player2',
    scores: { player1: 2, player2: 3 },
    gameFinished: true
  }
}
Round completed via timeout, emitting round_completed event
üèÅ Game finished: 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01, Winner: 6ayLUKjR
üîç Game state details: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  winner: '6ayLUKjR',
  currency: 'sol',
  player1: {
    id: '7kU8bVxK',
    wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL'
  },
  player2: {
    id: '6ayLUKjR',
    wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt'
  },
  processed: undefined
}
‚úÖ Processing game completion for 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üéØ Round result: {
  gameWinner: 'player2',
  gameFinished: true,
  round: 6,
  moves: { player1: null, player2: null },
  roundWinner: null,
  scores: { player1: 2, player2: 3 }
}
üöÄ Calling gameManager.processGameCompletion...
üéÆ Processing sol game completion: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  winner: 'player2',
  winnerWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  currency: 'sol',
  player1Wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  player2Wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt'
}
üîç About to check currency condition: gameState.currency = "sol"
üöÄ SOL game completed - implementing auto-finalization
üîç Currency check passed: sol === 'sol'
Winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
Should receive: 0.02 SOL (total pot minus platform fee)
Triggering auto-finalization...
Updating database stats - Winner gets 100 bonus points
üéØ Updated stats for 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt: {
  won: true,
  currency: 'sol',
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  newBalance: 1500,
  totalEarned: 1500,
  totalGames: 24
}
üéØ Updated stats for 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL: {
  won: false,
  currency: 'sol',
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  newBalance: 2100,
  totalEarned: 1800,
  totalGames: 51
}
Database stats updated: {
  player1: { won: false, newBalance: 2100 },
  player2: { won: true, newBalance: 1500 }
}
üí∞ SOL referral commission will be processed during auto-finalization
üöÄ Calling auto-finalization service...
üéØ Auto-finalization parameters: {
  gameId: '3a0b1093-60c2-4c29-9dec-aa2ac1abbd01',
  winnerWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  loserWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  stakeAmount: 0.01
}
üöÄ ===== STARTING AUTO-FINALIZATION =====
üìã Game ID: 3a0b1093-60c2-4c29-9dec-aa2ac1abbd01
üèÜ Winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üí∏ Stake: 0.01 SOL
‚è∞ Timestamp: 2025-10-10T01:55:53.441Z
üîç Finding PDA for gameId: "3a0b1093-60c2-4c29-9dec-aa2ac1abbd01" -> truncated: "3a0b1093-60c2-4c29-9dec-aa2ac1ab"
üéØ Game PDA: D9N4dMovopX95mT9WcztKGTCTkKzVuKYyFoXdgDSb4xK
üîß Game account not found on-chain - skipping blockchain creation, using direct finalization...
üí∞ Proceeding with direct SOL transfer without blockchain game...
üë§ Player1 (Winner): 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
üë§ Player2 (Loser): 7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL
üí∞ Processing SOL referral commission for 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt - Total pot: 0.02 SOL, Stake: 0.01 SOL
‚è∞ Countdown 2 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚úÖ SOL referral commission processed: {
  referrer: 'CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK',
  commission: 0.0002,
  platformFeeRate: 0.04,
  referrerFeeRate: 0.01
}
üéØ Referrer found: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK, Commission: 0.0002 SOL
üíµ Transfer calculations:
  Total pot: 0.02 SOL
  Fee rate: 5%
  Platform fee: 0.0008 SOL
  Referrer commission: 0.0002 SOL
  Base winner amount: 0.019000000000000003 SOL
  No fee compensation - users pay own fees
  Final winner amount: 0.019000000000000003 SOL
üí∏ Direct SOL transfer:
   Total pot: 0.020 SOL
   Platform fee: 0.001 SOL
   Referrer commission: 0.000 SOL
   Winner receives: 0.019 SOL
   Winner wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Platform wallet: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
   Referrer wallet: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üí∏ Creating real SOL transfer transactions...
üíé Added referrer transfer: 0.000200 SOL to CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üöÄ Sending transfer transaction...
üí∞ Real SOL transfer completed: 4NqTiZLyZbY4fqRybc9h56PcnoRSTWEGBBpZEmuQ9ZVdcueymnmLXRmKouCfSqL7j8QZkRhh3eVTGKKA2WiBBFLx
‚úÖ 0.019000 SOL sent to winner: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.000800 SOL sent to platform: 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt
‚úÖ 0.000200 SOL sent to referrer: CNTs1Nu8zYzC3Fwj628VMi9zkaWuuknTBT2rZuGZP7UK
üéâ ===== AUTO-FINALIZATION SUCCESS =====
‚úÖ Auto-finalization result: true
üéâ Auto-finalization successful
üí∞ Winner 6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt should now have 0.02 SOL
üöÄ Winner receives SOL automatically
‚è∞ Countdown 1 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚è∞ Countdown 0 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
‚è∞ Timer reached 0 for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0, clearing timer
‚è∞ Time up for game 96ce7d48-8f70-4597-b6fd-3e222400b6b0
üé≤ Auto-assigning rock to player1
üé≤ Auto-assigning scissors to player2
üîç Timeout processing: autoAssignedMoves: [
  { playerId: '6ayLUKjR', move: 'rock' },
  { playerId: '7kU8bVxK', move: 'scissors' }
]
üîç Processing 2 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'scissors', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 6ayLUKjR: rock
üì§ Emitting move_submitted for 7kU8bVxK: scissors
processRoundDirectly result: {
  success: true,
  gameId: '96ce7d48-8f70-4597-b6fd-3e222400b6b0',
  gameState: {
    gameId: '96ce7d48-8f70-4597-b6fd-3e222400b6b0',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.05,
    totalPot: 0.1,
    platformFee: 0,
    winnerPayout: 0.1,
    player1: {
      id: '6ayLUKjR',
      socketId: 'eFq4jwr01NEmrP3MAAD7',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 1,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061326588
    },
    player2: {
      id: '7kU8bVxK',
      socketId: '0y-lHf1SR-iDhA1bAAD9',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760061339554
    },
    currentRound: 1,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object] ],
    createdAt: '2025-10-10T01:55:26.588Z'
  },
  roundComplete: true,
  roundResult: {
    round: 1,
    moves: { player1: 'rock', player2: 'scissors' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 1, player2: 0 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
Socket disconnected: eFq4jwr01NEmrP3MAAD7
Player connected: ph0Gynz5ERchkvojAAD_
New socket connection: ph0Gynz5ERchkvojAAD_
üîß Registering submit_move handler for socket: ph0Gynz5ERchkvojAAD_
Player 6ayLUKjR leaving game via leave_game event
Game 96ce7d48-8f70-4597-b6fd-3e222400b6b0 finished - 7kU8bVxK wins by opponent forfeit
Processing sol game abandonment: {
  gameId: '96ce7d48-8f70-4597-b6fd-3e222400b6b0',
  winner: 'player2',
  quittingPlayer: 'player1',
  winnerWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  loserWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  currency: 'sol',
  reason: 'opponent_quit'
}
SOL game abandonment recorded in history
Removed player 6ayLUKjR from matchmaking queue
Player connected: PEwDsSL_U-Og21MfAAEB
New socket connection: PEwDsSL_U-Og21MfAAEB
üîß Registering submit_move handler for socket: PEwDsSL_U-Og21MfAAEB
Socket disconnected: ph0Gynz5ERchkvojAAD_
Socket disconnected: 0y-lHf1SR-iDhA1bAAD9
Player connected: DePzts8UHSbQ5f3uAAED
New socket connection: DePzts8UHSbQ5f3uAAED
üîß Registering submit_move handler for socket: DePzts8UHSbQ5f3uAAED
Socket disconnected: PEwDsSL_U-Og21MfAAEB
Player connected: PdJAZuWfvrH04rCLAAEF
New socket connection: PdJAZuWfvrH04rCLAAEF
üîß Registering submit_move handler for socket: PdJAZuWfvrH04rCLAAEF
Socket disconnected: PdJAZuWfvrH04rCLAAEF
Player connected: 0nIUxI6QbapWDCkSAAEH
New socket connection: 0nIUxI6QbapWDCkSAAEH
üîß Registering submit_move handler for socket: 0nIUxI6QbapWDCkSAAEH
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 0,
  totalGames: 143,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 126,
  finishedGames: 0
}
Player ID set from find_random_match: 6ayLUKjR
Found queued player match: 6ayLUKjR vs 7kU8bVxK
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be (300000ms)
Joining SOL game with stake 0.01 SOL
‚è∞ Cleared timeout timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be - second player joined
Player 6ayLUKjR joined sol game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Updated playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Successfully matched 6ayLUKjR with 7kU8bVxK in game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Random match for 6ayLUKjR: 41b493ea-8ed3-4ff8-afa3-ed7af19c62be (sol game)
‚è∞ Starting round timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be with duration 15s
‚è∞ Timer created for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Player connected: 7Uk8VeK1TSy-yVFhAAEJ
New socket connection: 7Uk8VeK1TSy-yVFhAAEJ
üîß Registering submit_move handler for socket: 7Uk8VeK1TSy-yVFhAAEJ
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: 7Uk8VeK1TSy-yVFhAAEJ
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Move submitted by 6ayLUKjR: scissors
‚è∞ Countdown 10 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Socket disconnected: 7Uk8VeK1TSy-yVFhAAEJ
‚è∞ Countdown 5 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 3 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 2 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 1 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Timer reached 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be, clearing timer
‚è∞ Time up for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
üé≤ Auto-assigning paper to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'paper' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'paper',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  gameState: {
    gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186604
    },
    player2: {
      id: '6ayLUKjR',
      socketId: '0nIUxI6QbapWDCkSAAEH',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186606
    },
    currentRound: 1,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object] ],
    createdAt: '2025-10-10T12:43:06.603Z'
  },
  roundComplete: true,
  roundResult: {
    round: 1,
    moves: { player1: 'paper', player2: 'scissors' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 0, player2: 1 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 2 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Starting round timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be with duration 15s
‚è∞ Timer created for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Player connected: h2wnq9QUY0xMnvC6AAEL
New socket connection: h2wnq9QUY0xMnvC6AAEL
üîß Registering submit_move handler for socket: h2wnq9QUY0xMnvC6AAEL
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'rock'
}
Move submission received: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: h2wnq9QUY0xMnvC6AAEL
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: rock
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "rock"
   - playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Move submitted by 6ayLUKjR: rock
Socket disconnected: h2wnq9QUY0xMnvC6AAEL
‚è∞ Countdown 10 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 5 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 3 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 2 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 1 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Timer reached 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be, clearing timer
‚è∞ Time up for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
üé≤ Auto-assigning rock to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'rock' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'rock', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: rock
processRoundDirectly result: {
  success: true,
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  gameState: {
    gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186604
    },
    player2: {
      id: '6ayLUKjR',
      socketId: '0nIUxI6QbapWDCkSAAEH',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 1,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186606
    },
    currentRound: 2,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object] ],
    createdAt: '2025-10-10T12:43:06.603Z'
  },
  roundComplete: true,
  roundResult: {
    round: 2,
    moves: { player1: 'rock', player2: 'rock' },
    roundWinner: 'draw',
    gameWinner: null,
    scores: { player1: 0, player2: 1 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 3 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Starting round timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be with duration 15s
‚è∞ Timer created for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 10 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Player connected: cuL4_TIsvTczR6-mAAEN
New socket connection: cuL4_TIsvTczR6-mAAEN
üîß Registering submit_move handler for socket: cuL4_TIsvTczR6-mAAEN
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: cuL4_TIsvTczR6-mAAEN
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Move submitted by 6ayLUKjR: scissors
Socket disconnected: cuL4_TIsvTczR6-mAAEN
‚è∞ Countdown 5 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 3 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 2 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 1 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Timer reached 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be, clearing timer
‚è∞ Time up for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
üé≤ Auto-assigning paper to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'paper' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'paper',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  gameState: {
    gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 0,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186604
    },
    player2: {
      id: '6ayLUKjR',
      socketId: '0nIUxI6QbapWDCkSAAEH',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186606
    },
    currentRound: 3,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object] ],
    createdAt: '2025-10-10T12:43:06.603Z'
  },
  roundComplete: true,
  roundResult: {
    round: 3,
    moves: { player1: 'paper', player2: 'scissors' },
    roundWinner: 'player2',
    gameWinner: null,
    scores: { player1: 0, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 4 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Starting round timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be with duration 15s
‚è∞ Timer created for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Player connected: vGj9S4Zq6qSrI8I6AAEP
New socket connection: vGj9S4Zq6qSrI8I6AAEP
üîß Registering submit_move handler for socket: vGj9S4Zq6qSrI8I6AAEP
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'rock'
}
Move submission received: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: vGj9S4Zq6qSrI8I6AAEP
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: rock
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "rock"
   - playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Move submitted by 6ayLUKjR: rock
Socket disconnected: vGj9S4Zq6qSrI8I6AAEP
‚è∞ Countdown 10 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 5 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 3 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 2 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 1 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Timer reached 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be, clearing timer
‚è∞ Time up for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
üé≤ Auto-assigning paper to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'paper' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: { player1Move: 'paper', player2Move: 'rock', gameStatus: 'playing' }
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: paper
processRoundDirectly result: {
  success: true,
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  gameState: {
    gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'paper',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186604
    },
    player2: {
      id: '6ayLUKjR',
      socketId: '0nIUxI6QbapWDCkSAAEH',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'rock',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186606
    },
    currentRound: 4,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T12:43:06.603Z'
  },
  roundComplete: true,
  roundResult: {
    round: 4,
    moves: { player1: 'paper', player2: 'rock' },
    roundWinner: 'player1',
    gameWinner: null,
    scores: { player1: 1, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 5 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Starting round timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be with duration 15s
‚è∞ Timer created for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 10 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 5 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Player connected: thRixR3c_UbFglYQAAER
New socket connection: thRixR3c_UbFglYQAAER
üîß Registering submit_move handler for socket: thRixR3c_UbFglYQAAER
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
Move submission received: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'scissors'
}
   - Current playerId: null
   - Socket ID: thRixR3c_UbFglYQAAER
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: scissors
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "scissors"
   - playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Move submitted by 6ayLUKjR: scissors
Socket disconnected: thRixR3c_UbFglYQAAER
‚è∞ Countdown 3 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 2 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 1 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Countdown 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Timer reached 0 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be, clearing timer
‚è∞ Time up for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
üé≤ Auto-assigning scissors to player1
üîç Timeout processing: autoAssignedMoves: [ { playerId: '7kU8bVxK', move: 'scissors' } ]
üîç Processing 1 auto-assigned moves...
üîç Game state after auto-assignment: {
  player1Move: 'scissors',
  player2Move: 'scissors',
  gameStatus: 'playing'
}
üîç Both players have moves, proceeding with round processing...
üì§ Emitting move_submitted for 7kU8bVxK: scissors
processRoundDirectly result: {
  success: true,
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  gameState: {
    gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
    gameType: 'public',
    currency: 'sol',
    stakeAmount: 0.01,
    totalPot: 0.02,
    platformFee: 0,
    winnerPayout: 0.02,
    player1: {
      id: '7kU8bVxK',
      socketId: 'epAryvOf5dO9L6eBAAC7',
      wallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
      wins: 1,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186604
    },
    player2: {
      id: '6ayLUKjR',
      socketId: '0nIUxI6QbapWDCkSAAEH',
      wallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
      wins: 2,
      currentMove: 'scissors',
      ready: false,
      stakeDeposited: true,
      joinTime: 1760100186606
    },
    currentRound: 5,
    gameStatus: 'playing',
    winner: null,
    moveHistory: [ [Object], [Object], [Object], [Object], [Object] ],
    createdAt: '2025-10-10T12:43:06.603Z'
  },
  roundComplete: true,
  roundResult: {
    round: 5,
    moves: { player1: 'scissors', player2: 'scissors' },
    roundWinner: 'draw',
    gameWinner: null,
    scores: { player1: 1, player2: 2 },
    gameFinished: false
  }
}
Round completed via timeout, emitting round_completed event
üîÑ Starting round 6 for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
‚è∞ Starting round timer for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be with duration 15s
‚è∞ Timer created for game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Player connected: HEu-wAs_P9L-NbqTAAET
New socket connection: HEu-wAs_P9L-NbqTAAET
üîß Registering submit_move handler for socket: HEu-wAs_P9L-NbqTAAET
SUBMIT_MOVE EVENT RECEIVED {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'rock'
}
Move submission received: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  playerId: '6ayLUKjR',
  move: 'rock'
}
   - Current playerId: null
   - Socket ID: HEu-wAs_P9L-NbqTAAET
   - Data playerId: 6ayLUKjR
   - Final playerId for move: 6ayLUKjR
   - Move: rock
GameManager.submitMove called:
   - playerId: "6ayLUKjR"
   - move: "rock"
   - playerGames map: [
  [ '7kU8bVxK', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ],
  [ '6ayLUKjR', '41b493ea-8ed3-4ff8-afa3-ed7af19c62be' ]
]
Move submitted by 6ayLUKjR: rock
Socket disconnected: HEu-wAs_P9L-NbqTAAET
Socket disconnected: 0nIUxI6QbapWDCkSAAEH
Player connected: dZ_vwGF8-nOeKAbEAAEV
New socket connection: dZ_vwGF8-nOeKAbEAAEV
üîß Registering submit_move handler for socket: dZ_vwGF8-nOeKAbEAAEV
Player 6ayLUKjR leaving game via leave_game event
Game 41b493ea-8ed3-4ff8-afa3-ed7af19c62be finished - 7kU8bVxK wins by opponent forfeit
Processing sol game abandonment: {
  gameId: '41b493ea-8ed3-4ff8-afa3-ed7af19c62be',
  winner: 'player1',
  quittingPlayer: 'player2',
  winnerWallet: '7kU8bVxK7biceky5FwUnC2thRC9nRYWN9PGKXnwzC6FL',
  loserWallet: '6ayLUKjR2HUahBoRLeRKVkE6bLtUhRA9eNX7LoRFgzDt',
  currency: 'sol',
  reason: 'opponent_quit'
}
Player connected: GHZ0GdEDOKOBTHZfAAEX
New socket connection: GHZ0GdEDOKOBTHZfAAEX
üîß Registering submit_move handler for socket: GHZ0GdEDOKOBTHZfAAEX
SOL game abandonment recorded in history
Player 6ayLUKjR left game: 41b493ea-8ed3-4ff8-afa3-ed7af19c62be
Socket disconnected: dZ_vwGF8-nOeKAbEAAEV
Socket disconnected: GHZ0GdEDOKOBTHZfAAEX
Player connected: kACpXevJc7HgiWnmAAEZ
New socket connection: kACpXevJc7HgiWnmAAEZ
üîß Registering submit_move handler for socket: kACpXevJc7HgiWnmAAEZ
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 144,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 127,
  finishedGames: 1
}
Player ID set from find_random_match: 6ayLUKjR
Adding player 6ayLUKjR to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game e2f36d2c-0cbb-46d4-a55a-5a6b2cf2b45c (300000ms)
Created waiting game for player 6ayLUKjR: e2f36d2c-0cbb-46d4-a55a-5a6b2cf2b45c
Random match for 6ayLUKjR: e2f36d2c-0cbb-46d4-a55a-5a6b2cf2b45c (sol game)
Socket disconnected: kACpXevJc7HgiWnmAAEZ
Player connected: f_TfKu5TST8JoVZEAAEb
New socket connection: f_TfKu5TST8JoVZEAAEb
üîß Registering submit_move handler for socket: f_TfKu5TST8JoVZEAAEb
Socket disconnected: f_TfKu5TST8JoVZEAAEb
Player connected: _b648_IbznwSLicmAAEd
New socket connection: _b648_IbznwSLicmAAEd
üîß Registering submit_move handler for socket: _b648_IbznwSLicmAAEd
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 1,
  totalPlayers: 2,
  totalGames: 144,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 127,
  finishedGames: 1
}
‚è∞ Game e2f36d2c-0cbb-46d4-a55a-5a6b2cf2b45c timed out - no second player joined
Cleaned up game e2f36d2c-0cbb-46d4-a55a-5a6b2cf2b45c
Game e2f36d2c-0cbb-46d4-a55a-5a6b2cf2b45c cancelled due to timeout
Socket disconnected: DePzts8UHSbQ5f3uAAED
Player connected: 1cIkru2oeWXgyUmBAAEf
New socket connection: 1cIkru2oeWXgyUmBAAEf
üîß Registering submit_move handler for socket: 1cIkru2oeWXgyUmBAAEf
Socket disconnected: _b648_IbznwSLicmAAEd
Socket disconnected: 1cIkru2oeWXgyUmBAAEf
Player connected: 6sKk1P0cGDQpvMe_AAEh
New socket connection: 6sKk1P0cGDQpvMe_AAEh
üîß Registering submit_move handler for socket: 6sKk1P0cGDQpvMe_AAEh
Player connected: Sn_lCAekwOvLujxoAAEj
New socket connection: Sn_lCAekwOvLujxoAAEj
üîß Registering submit_move handler for socket: Sn_lCAekwOvLujxoAAEj
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 144,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 127,
  finishedGames: 1
}
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 0,
  totalPlayers: 1,
  totalGames: 144,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 127,
  finishedGames: 1
}
Player ID set from find_random_match: 6ayLUKjR
Adding player 6ayLUKjR to matchmaking queue
Creating SOL game with stake 0.01 SOL
‚è∞ Started timeout timer for public game 32226494-6564-4128-a6f0-799d6b2a3cd4 (300000ms)
Created waiting game for player 6ayLUKjR: 32226494-6564-4128-a6f0-799d6b2a3cd4
Random match for 6ayLUKjR: 32226494-6564-4128-a6f0-799d6b2a3cd4 (sol game)
Socket disconnected: 6sKk1P0cGDQpvMe_AAEh
Player connected: Oy0UF2XbxJy81QkVAAEl
New socket connection: Oy0UF2XbxJy81QkVAAEl
üîß Registering submit_move handler for socket: Oy0UF2XbxJy81QkVAAEl
Socket disconnected: Oy0UF2XbxJy81QkVAAEl
Player connected: whtPeHLNu87iOFBBAAEn
New socket connection: whtPeHLNu87iOFBBAAEn
üîß Registering submit_move handler for socket: whtPeHLNu87iOFBBAAEn
üìä Combined stats: {
  activeGames: 0,
  waitingGames: 1,
  totalPlayers: 2,
  totalGames: 144,
  totalUsers: 10,
  totalPointsGames: 17,
  totalSolGames: 127,
  finishedGames: 1
}
Socket disconnected: Sn_lCAekwOvLujxoAAEj
Socket disconnected: whtPeHLNu87iOFBBAAEn
